var dr=Object.defineProperty;var mr=(k,P,M)=>P in k?dr(k,P,{enumerable:!0,configurable:!0,writable:!0,value:M}):k[P]=M;var f=(k,P,M)=>(mr(k,typeof P!="symbol"?P+"":P,M),M);(function(k,P){typeof exports=="object"&&typeof module<"u"?P(exports):typeof define=="function"&&define.amd?define(["exports"],P):(k=typeof globalThis<"u"?globalThis:k||self,P(k.Meshtastic={}))})(this,function(k){var no;"use strict";const P={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function M(n,e,a,o=!1){const t=String(e),i=(c,m)=>`\x1B[${m[0]}m${c}\x1B[${m[1]}m`,r=(c,m)=>m!=null&&typeof m=="string"?i(c,P[m]):m!=null&&Array.isArray(m)?m.reduce((l,h)=>r(l,h),c):m!=null&&m[c.trim()]!=null?r(c,m[c.trim()]):m!=null&&m["*"]!=null?r(c,m["*"]):c,s=null;return t.replace(/{{(.+?)}}/g,(c,m)=>{var h;const l=a[m]!=null?String(a[m]):o?"":c;return n.stylePrettyLogs?r(l,((h=n==null?void 0:n.prettyLogStyles)==null?void 0:h[m])??s)+i("",P.reset):l})}function I(n,e=2,a=0){return n!=null&&isNaN(n)?"":(n=n!=null?n+a:n,e===2?n==null?"--":n<10?"0"+n:n.toString():n==null?"---":n<10?"00"+n:n<100?"0"+n:n.toString())}function oo(n){return{href:n.href,protocol:n.protocol,username:n.username,password:n.password,host:n.host,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search,searchParams:[...n.searchParams].map(([e,a])=>({key:e,value:a})),hash:n.hash,origin:n.origin}}function qn(n){const e=new Set;return JSON.stringify(n,(a,o)=>{if(typeof o=="object"&&o!==null){if(e.has(o))return"[Circular]";e.add(o)}return o})}function N(n,e){const a={seen:[],stylize:Wn};return e!=null&&zn(a,e),$(a.showHidden)&&(a.showHidden=!1),$(a.depth)&&(a.depth=2),$(a.colors)&&(a.colors=!0),$(a.customInspect)&&(a.customInspect=!0),a.colors&&(a.stylize=ro),pe(a,n,a.depth)}N.colors=P,N.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function io(n){return typeof n=="boolean"}function $(n){return n===void 0}function Wn(n){return n}function ro(n,e){var o,t,i,r;const a=N.styles[e];return a!=null&&((t=(o=N==null?void 0:N.colors)==null?void 0:o[a])==null?void 0:t[0])!=null&&((r=(i=N==null?void 0:N.colors)==null?void 0:i[a])==null?void 0:r[1])!=null?"\x1B["+N.colors[a][0]+"m"+n+"\x1B["+N.colors[a][1]+"m":n}function fe(n){return typeof n=="function"}function Xn(n){return typeof n=="string"}function so(n){return typeof n=="number"}function Kn(n){return n===null}function Yn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Xe(n){return he(n)&&Ye(n)==="[object RegExp]"}function he(n){return typeof n=="object"&&n!==null}function Ke(n){return he(n)&&(Ye(n)==="[object Error]"||n instanceof Error)}function Jn(n){return he(n)&&Ye(n)==="[object Date]"}function Ye(n){return Object.prototype.toString.call(n)}function co(n){const e={};return n.forEach(a=>{e[a]=!0}),e}function mo(n,e,a,o,t){const i=[];for(let r=0,s=e.length;r<s;++r)Yn(e,String(r))?i.push(ze(n,e,a,o,String(r),!0)):i.push("");return t.forEach(r=>{r.match(/^\d+$/)||i.push(ze(n,e,a,o,r,!0))}),i}function Je(n){return"["+Error.prototype.toString.call(n)+"]"}function pe(n,e,a=0){if(n.customInspect&&e!=null&&fe(e)&&(e==null?void 0:e.inspect)!==N&&!(e!=null&&e.constructor&&(e==null?void 0:e.constructor.prototype)===e)){if(typeof e.inspect!="function"&&e.toString!=null)return e.toString();let l=e==null?void 0:e.inspect(a,n);return Xn(l)||(l=pe(n,l,a)),l}const o=O(n,e);if(o)return o;let t=Object.keys(e);const i=co(t);try{n.showHidden&&Object.getOwnPropertyNames&&(t=Object.getOwnPropertyNames(e))}catch{}if(Ke(e)&&(t.indexOf("message")>=0||t.indexOf("description")>=0))return Je(e);if(t.length===0)if(fe(n.stylize)){if(fe(e)){const l=e.name?": "+e.name:"";return n.stylize("[Function"+l+"]","special")}if(Xe(e))return n.stylize(RegExp.prototype.toString.call(e),"regexp");if(Jn(e))return n.stylize(Date.prototype.toISOString.call(e),"date");if(Ke(e))return Je(e)}else return e;let r="",s=!1,c=[`{
`,`
}`];if(Array.isArray(e)&&(s=!0,c=[`[
`,`
]`]),fe(e)&&(r=" [Function"+(e.name?": "+e.name:"")+"]"),Xe(e)&&(r=" "+RegExp.prototype.toString.call(e)),Jn(e)&&(r=" "+Date.prototype.toUTCString.call(e)),Ke(e)&&(r=" "+Je(e)),t.length===0&&(!s||e.length==0))return c[0]+r+c[1];if(a<0)return Xe(e)?n.stylize(RegExp.prototype.toString.call(e),"regexp"):n.stylize("[Object]","special");n.seen.push(e);let m;return s?m=mo(n,e,a,i,t):m=t.map(l=>ze(n,e,a,i,l,s)),n.seen.pop(),lo(m,r,c)}function ze(n,e,a,o,t,i){let r,s,c={value:void 0};try{c.value=e[t]}catch{}try{Object.getOwnPropertyDescriptor&&(c=Object.getOwnPropertyDescriptor(e,t)||c)}catch{}if(c.get?c.set?s=n.stylize("[Getter/Setter]","special"):s=n.stylize("[Getter]","special"):c.set&&(s=n.stylize("[Setter]","special")),Yn(o,t)||(r="["+t+"]"),s||(n.seen.indexOf(c.value)<0?(Kn(a)?s=pe(n,c.value,void 0):s=pe(n,c.value,a-1),s.indexOf(`
`)>-1&&(i?s=s.split(`
`).map(m=>"  "+m).join(`
`).substr(2):s=`
`+s.split(`
`).map(m=>"   "+m).join(`
`))):s=n.stylize("[Circular]","special")),$(r)){if(i&&t.match(/^\d+$/))return s;r=JSON.stringify(""+t),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=n.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),r=n.stylize(r,"string"))}return r+": "+s}function O(n,e){if($(e))return n.stylize("undefined","undefined");if(Xn(e)){const a="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return n.stylize(a,"string")}if(so(e))return n.stylize(""+e,"number");if(io(e))return n.stylize(""+e,"boolean");if(Kn(e))return n.stylize("null","null")}function lo(n,e,a){return a[0]+(e===""?"":e+`
`)+"  "+n.join(`,
  `)+" "+a[1]}function zn(n,e){if(!e||!he(e))return n;const a={...n},o={...e},t=Object.keys(e);let i=t.length;for(;i--;)a[t[i]]=o[t[i]];return n}function uo(n,...e){const a={seen:[],stylize:Wn};n!=null&&zn(a,n);const o=e[0];let t=0,i="",r="";if(typeof o=="string"){if(e.length===1)return o;let s,c=0;for(let m=0;m<o.length-1;m++)if(o.charCodeAt(m)===37){const l=o.charCodeAt(++m);if(t+1!==e.length){switch(l){case 115:{const h=e[++t];typeof h=="number"||typeof h=="bigint"?s=O(a,h):typeof h!="object"||h===null?s=String(h):s=N(h,{...n,compact:3,colors:!1,depth:0});break}case 106:s=qn(e[++t]);break;case 100:{const h=e[++t];typeof h=="bigint"?s=O(a,h):typeof h=="symbol"?s="NaN":s=O(a,h);break}case 79:s=N(e[++t],n);break;case 111:s=N(e[++t],{...n,showHidden:!0,showProxy:!0,depth:4});break;case 105:{const h=e[++t];typeof h=="bigint"?s=O(a,h):typeof h=="symbol"?s="NaN":s=O(a,parseInt(s));break}case 102:{const h=e[++t];typeof h=="symbol"?s="NaN":s=O(a,parseInt(h));break}case 99:t+=1,s="";break;case 37:i+=o.slice(c,m),c=m+1;continue;default:continue}c!==m-1&&(i+=o.slice(c,m-1)),i+=s,c=m+1}else l===37&&(i+=o.slice(c,m),c=m+1)}c!==0&&(t++,r=" ",c<o.length&&(i+=o.slice(c)))}for(;t<e.length;){const s=e[t];i+=r,i+=typeof s!="string"?N(s,n):s,r=" ",t++}return i}const fo={getCallerStackFrame:Qn,getErrorTrace:Zn,getMeta:go,transportJSON:ko,transportFormatted:To,isBuffer:yo,isError:ea,prettyFormatLogObj:_o,prettyFormatErrorObj:na},ho={runtime:[typeof window,typeof document].includes("undefined")?"Generic":"Browser",browser:(no=globalThis==null?void 0:globalThis.navigator)==null?void 0:no.userAgent},po=/(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\/[^:/]+){2,})(?::(\d+))?(?::(\d+))?/;function go(n,e,a,o,t,i){return Object.assign({},ho,{name:t,parentNames:i,date:new Date,logLevelId:n,logLevelName:e,path:o?void 0:Qn(a)})}function Qn(n,e=Error()){var a,o,t;return jn((t=(o=(a=e==null?void 0:e.stack)==null?void 0:a.split(`
`))==null?void 0:o.filter(i=>!i.includes("Error: ")))==null?void 0:t[n])}function Zn(n){var e,a,o;return(o=(a=(e=n==null?void 0:n.stack)==null?void 0:e.split(`
`))==null?void 0:a.filter(t=>!t.includes("Error: ")))==null?void 0:o.reduce((t,i)=>(t.push(jn(i)),t),[])}function jn(n){var o;const e=(o=globalThis==null?void 0:globalThis.location)==null?void 0:o.origin,a={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(n!=null){const t=n.match(po);if(t){a.filePath=t[1].replace(/\?.*$/,""),a.fullFilePath=`${e}${a.filePath}`;const i=a.filePath.split("/");a.fileName=i[i.length-1],a.fileLine=t[2],a.fileColumn=t[3],a.filePathWithLine=`${a.filePath}:${a.fileLine}`,a.fileNameWithLine=`${a.fileName}:${a.fileLine}`}}return a}function ea(n){return n instanceof Error}function _o(n,e){return n.reduce((a,o)=>(ea(o)?a.errors.push(na(o,e)):a.args.push(o),a),{args:[],errors:[]})}function na(n,e){const a=Zn(n).map(t=>M(e,e.prettyErrorStackTemplate,{...t},!0)),o={errorName:` ${n.name} `,errorMessage:Object.getOwnPropertyNames(n).reduce((t,i)=>(i!=="stack"&&t.push(n[i]),t),[]).join(", "),errorStack:a.join(`
`)};return M(e,e.prettyErrorTemplate,o)}function To(n,e,a,o){const t=(a.length>0&&e.length>0?`
`:"")+a.join(`
`);o.prettyInspectOptions.colors=o.stylePrettyLogs,console.log(n+uo(o.prettyInspectOptions,...e)+t)}function ko(n){console.log(qn(n))}function yo(n){return!1}class vo{constructor(e,a,o=4){var t,i,r,s,c,m,l,h;this.logObj=a,this.stackDepthLevel=o,this.runtime=fo,this.settings={type:(e==null?void 0:e.type)??"pretty",name:e==null?void 0:e.name,parentNames:e==null?void 0:e.parentNames,minLevel:(e==null?void 0:e.minLevel)??0,argumentsArrayName:e==null?void 0:e.argumentsArrayName,hideLogPositionForProduction:(e==null?void 0:e.hideLogPositionForProduction)??!1,prettyLogTemplate:(e==null?void 0:e.prettyLogTemplate)??"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	{{filePathWithLine}}{{nameWithDelimiterPrefix}}	",prettyErrorTemplate:(e==null?void 0:e.prettyErrorTemplate)??`
{{errorName}} {{errorMessage}}
error stack:
{{errorStack}}`,prettyErrorStackTemplate:(e==null?void 0:e.prettyErrorStackTemplate)??`  • {{fileName}}	{{method}}
	{{filePathWithLine}}`,prettyErrorParentNamesSeparator:(e==null?void 0:e.prettyErrorParentNamesSeparator)??":",prettyErrorLoggerNameDelimiter:(e==null?void 0:e.prettyErrorLoggerNameDelimiter)??"	",stylePrettyLogs:(e==null?void 0:e.stylePrettyLogs)??!0,prettyLogTimeZone:(e==null?void 0:e.prettyLogTimeZone)??"UTC",prettyLogStyles:(e==null?void 0:e.prettyLogStyles)??{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:(e==null?void 0:e.prettyInspectOptions)??{colors:!0,compact:!1,depth:1/0},metaProperty:(e==null?void 0:e.metaProperty)??"_meta",maskPlaceholder:(e==null?void 0:e.maskPlaceholder)??"[***]",maskValuesOfKeys:(e==null?void 0:e.maskValuesOfKeys)??["password"],maskValuesOfKeysCaseInsensitive:(e==null?void 0:e.maskValuesOfKeysCaseInsensitive)??!1,maskValuesRegEx:e==null?void 0:e.maskValuesRegEx,prefix:[...(e==null?void 0:e.prefix)??[]],attachedTransports:[...(e==null?void 0:e.attachedTransports)??[]],overwrite:{mask:(t=e==null?void 0:e.overwrite)==null?void 0:t.mask,toLogObj:(i=e==null?void 0:e.overwrite)==null?void 0:i.toLogObj,addMeta:(r=e==null?void 0:e.overwrite)==null?void 0:r.addMeta,addPlaceholders:(s=e==null?void 0:e.overwrite)==null?void 0:s.addPlaceholders,formatMeta:(c=e==null?void 0:e.overwrite)==null?void 0:c.formatMeta,formatLogObj:(m=e==null?void 0:e.overwrite)==null?void 0:m.formatLogObj,transportFormatted:(l=e==null?void 0:e.overwrite)==null?void 0:l.transportFormatted,transportJSON:(h=e==null?void 0:e.overwrite)==null?void 0:h.transportJSON}}}log(e,a,...o){var h,T,S,A,te,oe,ie,re,se,ce,de,me,le,ue;if(e<this.settings.minLevel)return;const t=[...this.settings.prefix,...o],i=((h=this.settings.overwrite)==null?void 0:h.mask)!=null?(T=this.settings.overwrite)==null?void 0:T.mask(t):this.settings.maskValuesOfKeys!=null&&this.settings.maskValuesOfKeys.length>0?this._mask(t):t,r=this.logObj!=null?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,s=((S=this.settings.overwrite)==null?void 0:S.toLogObj)!=null?(A=this.settings.overwrite)==null?void 0:A.toLogObj(i,r):this._toLogObj(i,r),c=((te=this.settings.overwrite)==null?void 0:te.addMeta)!=null?(oe=this.settings.overwrite)==null?void 0:oe.addMeta(s,e,a):this._addMetaToLogObj(s,e,a);let m,l;return((ie=this.settings.overwrite)==null?void 0:ie.formatMeta)!=null&&(m=(re=this.settings.overwrite)==null?void 0:re.formatMeta(c==null?void 0:c[this.settings.metaProperty])),((se=this.settings.overwrite)==null?void 0:se.formatLogObj)!=null&&(l=(ce=this.settings.overwrite)==null?void 0:ce.formatLogObj(i,this.settings)),this.settings.type==="pretty"&&(m=m??this._prettyFormatLogObjMeta(c==null?void 0:c[this.settings.metaProperty]),l=l??this.runtime.prettyFormatLogObj(i,this.settings)),m!=null&&l!=null?((de=this.settings.overwrite)==null?void 0:de.transportFormatted)!=null?(me=this.settings.overwrite)==null||me.transportFormatted(m,l.args,l.errors,this.settings):this.runtime.transportFormatted(m,l.args,l.errors,this.settings):((le=this.settings.overwrite)==null?void 0:le.transportJSON)!=null?(ue=this.settings.overwrite)==null||ue.transportJSON(c):this.settings.type!=="hidden"&&this.runtime.transportJSON(c),this.settings.attachedTransports!=null&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach(We=>{We(c)}),c}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,a){var i,r,s;const o={...this.settings,...e,parentNames:((i=this.settings)==null?void 0:i.parentNames)!=null&&((r=this.settings)==null?void 0:r.name)!=null?[...this.settings.parentNames,this.settings.name]:((s=this.settings)==null?void 0:s.name)!=null?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...(e==null?void 0:e.prefix)??[]]};return new this.constructor(o,a??this.logObj,this.stackDepthLevel)}_mask(e){const a=this.settings.maskValuesOfKeysCaseInsensitive!==!0?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map(o=>o.toLowerCase());return e==null?void 0:e.map(o=>this._recursiveCloneAndMaskValuesOfKeys(o,a))}_recursiveCloneAndMaskValuesOfKeys(e,a,o=[]){var t,i;if(o.includes(e))return{...e};if(typeof e=="object"&&e!==null&&o.push(e),this.runtime.isError(e)||this.runtime.isBuffer(e))return e;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Array.isArray(e))return e.map(r=>this._recursiveCloneAndMaskValuesOfKeys(r,a,o));if(e instanceof Date)return new Date(e.getTime());if(e instanceof URL)return oo(e);if(e!==null&&typeof e=="object"){const r=this.runtime.isError(e)?this._cloneError(e):Object.create(Object.getPrototypeOf(e));return Object.getOwnPropertyNames(e).reduce((s,c)=>{var m;return s[c]=a.includes(((m=this.settings)==null?void 0:m.maskValuesOfKeysCaseInsensitive)!==!0?c:c.toLowerCase())?this.settings.maskPlaceholder:this._recursiveCloneAndMaskValuesOfKeys(e[c],a,o),s},r)}else{if(typeof e=="string"){let r=e;for(const s of((t=this.settings)==null?void 0:t.maskValuesRegEx)||[])r=r.replace(s,((i=this.settings)==null?void 0:i.maskPlaceholder)||"");return r}return e}}_recursiveCloneAndExecuteFunctions(e,a=[]){return this.isObjectOrArray(e)&&a.includes(e)?this.shallowCopy(e):(this.isObjectOrArray(e)&&a.push(e),Array.isArray(e)?e.map(o=>this._recursiveCloneAndExecuteFunctions(o,a)):e instanceof Date?new Date(e.getTime()):this.isObject(e)?Object.getOwnPropertyNames(e).reduce((o,t)=>{const i=Object.getOwnPropertyDescriptor(e,t);if(i){Object.defineProperty(o,t,i);const r=e[t];o[t]=typeof r=="function"?r():this._recursiveCloneAndExecuteFunctions(r,a)}return o},Object.create(Object.getPrototypeOf(e))):e)}isObjectOrArray(e){return typeof e=="object"&&e!==null}isObject(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}shallowCopy(e){return Array.isArray(e)?[...e]:{...e}}_toLogObj(e,a={}){return e=e==null?void 0:e.map(o=>this.runtime.isError(o)?this._toErrorObject(o):o),this.settings.argumentsArrayName==null?e.length===1&&!Array.isArray(e[0])&&this.runtime.isBuffer(e[0])!==!0&&!(e[0]instanceof Date)?a=typeof e[0]=="object"&&e[0]!=null?{...e[0],...a}:{0:e[0],...a}:a={...a,...e}:a={...a,[this.settings.argumentsArrayName]:e},a}_cloneError(e){const a=new e.constructor;return Object.getOwnPropertyNames(e).forEach(o=>{a[o]=e[o]}),a}_toErrorObject(e){return{nativeError:e,name:e.name??"Error",message:e.message,stack:this.runtime.getErrorTrace(e)}}_addMetaToLogObj(e,a,o){return{...e,[this.settings.metaProperty]:this.runtime.getMeta(a,o,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){var r,s,c,m,l,h,T,S,A,te,oe,ie,re,se,ce,de,me,le,ue,We,ao,to;if(e==null)return"";let a=this.settings.prettyLogTemplate;const o={};a.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?a=a.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):this.settings.prettyLogTimeZone==="UTC"?(o.yyyy=((r=e==null?void 0:e.date)==null?void 0:r.getUTCFullYear())??"----",o.mm=I((s=e==null?void 0:e.date)==null?void 0:s.getUTCMonth(),2,1),o.dd=I((c=e==null?void 0:e.date)==null?void 0:c.getUTCDate(),2),o.hh=I((m=e==null?void 0:e.date)==null?void 0:m.getUTCHours(),2),o.MM=I((l=e==null?void 0:e.date)==null?void 0:l.getUTCMinutes(),2),o.ss=I((h=e==null?void 0:e.date)==null?void 0:h.getUTCSeconds(),2),o.ms=I((T=e==null?void 0:e.date)==null?void 0:T.getUTCMilliseconds(),3)):(o.yyyy=((S=e==null?void 0:e.date)==null?void 0:S.getFullYear())??"----",o.mm=I((A=e==null?void 0:e.date)==null?void 0:A.getMonth(),2,1),o.dd=I((te=e==null?void 0:e.date)==null?void 0:te.getDate(),2),o.hh=I((oe=e==null?void 0:e.date)==null?void 0:oe.getHours(),2),o.MM=I((ie=e==null?void 0:e.date)==null?void 0:ie.getMinutes(),2),o.ss=I((re=e==null?void 0:e.date)==null?void 0:re.getSeconds(),2),o.ms=I((se=e==null?void 0:e.date)==null?void 0:se.getMilliseconds(),3));const t=this.settings.prettyLogTimeZone==="UTC"?e==null?void 0:e.date:new Date(((ce=e==null?void 0:e.date)==null?void 0:ce.getTime())-((de=e==null?void 0:e.date)==null?void 0:de.getTimezoneOffset())*6e4);o.rawIsoStr=t==null?void 0:t.toISOString(),o.dateIsoStr=t==null?void 0:t.toISOString().replace("T"," ").replace("Z",""),o.logLevelName=e==null?void 0:e.logLevelName,o.fileNameWithLine=((me=e==null?void 0:e.path)==null?void 0:me.fileNameWithLine)??"",o.filePathWithLine=((le=e==null?void 0:e.path)==null?void 0:le.filePathWithLine)??"",o.fullFilePath=((ue=e==null?void 0:e.path)==null?void 0:ue.fullFilePath)??"";let i=(We=this.settings.parentNames)==null?void 0:We.join(this.settings.prettyErrorParentNamesSeparator);return i=i!=null&&(e==null?void 0:e.name)!=null?i+this.settings.prettyErrorParentNamesSeparator:void 0,o.name=(e==null?void 0:e.name)!=null||i!=null?(i??"")+(e==null?void 0:e.name):"",o.nameWithDelimiterPrefix=o.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+o.name:"",o.nameWithDelimiterSuffix=o.name.length>0?o.name+this.settings.prettyErrorLoggerNameDelimiter:"",((ao=this.settings.overwrite)==null?void 0:ao.addPlaceholders)!=null&&((to=this.settings.overwrite)==null||to.addPlaceholders(e,o)),M(this.settings,a,o)}}class bo extends vo{constructor(e,a){const o=typeof window<"u"&&typeof document<"u",t=o?window.chrome!==void 0&&window.CSS!==void 0&&window.CSS.supports("color","green"):!1,i=o?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1;e=e||{},e.stylePrettyLogs=e.stylePrettyLogs&&o&&!t?!1:e.stylePrettyLogs,super(e,a,i?4:5)}log(e,a,...o){return super.log(e,a,...o)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,a){return super.getSubLogger(e,a)}}var _={},G={},ge={},B={},K={};Object.defineProperty(K,"__esModule",{value:!0}),K.DispatcherWrapper=void 0;class Co{constructor(e){this._subscribe=a=>e.subscribe(a),this._unsubscribe=a=>e.unsubscribe(a),this._one=a=>e.one(a),this._has=a=>e.has(a),this._clear=()=>e.clear(),this._count=()=>e.count,this._onSubscriptionChange=()=>e.onSubscriptionChange}get onSubscriptionChange(){return this._onSubscriptionChange()}get count(){return this._count()}subscribe(e){return this._subscribe(e)}sub(e){return this.subscribe(e)}unsubscribe(e){this._unsubscribe(e)}unsub(e){this.unsubscribe(e)}one(e){return this._one(e)}has(e){return this._has(e)}clear(){this._clear()}}K.DispatcherWrapper=Co;var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.Subscription=void 0;class wo{constructor(e,a){this.handler=e,this.isOnce=a,this.isExecuted=!1}execute(e,a,o){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var t=this.handler;e?setTimeout(()=>{t.apply(a,o)},1):t.apply(a,o)}}}Y.Subscription=wo;var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.EventManagement=void 0;class Eo{constructor(e){this.unsub=e,this.propagationStopped=!1}stopPropagation(){this.propagationStopped=!0}}H.EventManagement=Eo,Object.defineProperty(B,"__esModule",{value:!0}),B.SubscriptionChangeEventDispatcher=B.DispatcherBase=void 0;const No=K,So=Y,Po=H;class aa{constructor(){this._subscriptions=new Array}get count(){return this._subscriptions.length}get onSubscriptionChange(){return this._onSubscriptionChange==null&&(this._onSubscriptionChange=new ta),this._onSubscriptionChange.asEvent()}subscribe(e){return e&&(this._subscriptions.push(this.createSubscription(e,!1)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}sub(e){return this.subscribe(e)}one(e){return e&&(this._subscriptions.push(this.createSubscription(e,!0)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}has(e){return e?this._subscriptions.some(a=>a.handler==e):!1}unsubscribe(e){if(!e)return;let a=!1;for(let o=0;o<this._subscriptions.length;o++)if(this._subscriptions[o].handler==e){this._subscriptions.splice(o,1),a=!0;break}a&&this.triggerSubscriptionChange()}unsub(e){this.unsubscribe(e)}_dispatch(e,a,o){for(let t of[...this._subscriptions]){let i=new Po.EventManagement(()=>this.unsub(t.handler)),r=Array.prototype.slice.call(o);if(r.push(i),t.execute(e,a,r),this.cleanup(t),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}createSubscription(e,a){return new So.Subscription(e,a)}cleanup(e){let a=!1;if(e.isOnce&&e.isExecuted){let o=this._subscriptions.indexOf(e);o>-1&&(this._subscriptions.splice(o,1),a=!0)}a&&this.triggerSubscriptionChange()}asEvent(){return this._wrap==null&&(this._wrap=new No.DispatcherWrapper(this)),this._wrap}clear(){this._subscriptions.length!=0&&(this._subscriptions.splice(0,this._subscriptions.length),this.triggerSubscriptionChange())}triggerSubscriptionChange(){this._onSubscriptionChange!=null&&this._onSubscriptionChange.dispatch(this.count)}}B.DispatcherBase=aa;class ta extends aa{dispatch(e){this._dispatch(!1,this,arguments)}}B.SubscriptionChangeEventDispatcher=ta;var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.DispatchError=void 0;class Ao extends Error{constructor(e){super(e)}}J.DispatchError=Ao;var _e={};Object.defineProperty(_e,"__esModule",{value:!0}),_e.EventListBase=void 0;class Ro{constructor(){this._events={}}get(e){let a=this._events[e];return a||(a=this.createDispatcher(),this._events[e]=a,a)}remove(e){delete this._events[e]}}_e.EventListBase=Ro;var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.HandlingBase=void 0;class Io{constructor(e){this.events=e}one(e,a){this.events.get(e).one(a)}has(e,a){return this.events.get(e).has(a)}subscribe(e,a){this.events.get(e).subscribe(a)}sub(e,a){this.subscribe(e,a)}unsubscribe(e,a){this.events.get(e).unsubscribe(a)}unsub(e,a){this.unsubscribe(e,a)}}Te.HandlingBase=Io;var ke={},z={};Object.defineProperty(z,"__esModule",{value:!0}),z.PromiseSubscription=void 0;class Do{constructor(e,a){this.handler=e,this.isOnce=a,this.isExecuted=!1}async execute(e,a,o){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var t=this.handler;if(e){setTimeout(()=>{t.apply(a,o)},1);return}await t.apply(a,o)}}}z.PromiseSubscription=Do,Object.defineProperty(ke,"__esModule",{value:!0}),ke.PromiseDispatcherBase=void 0;const Mo=z,xo=H,Oo=B,Lo=J;class Fo extends Oo.DispatcherBase{_dispatch(e,a,o){throw new Lo.DispatchError("_dispatch not supported. Use _dispatchAsPromise.")}createSubscription(e,a){return new Mo.PromiseSubscription(e,a)}async _dispatchAsPromise(e,a,o){for(let t of[...this._subscriptions]){let i=new xo.EventManagement(()=>this.unsub(t.handler)),r=Array.prototype.slice.call(o);if(r.push(i),await t.execute(e,a,r),this.cleanup(t),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}}ke.PromiseDispatcherBase=Fo,function(n){/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(n,"__esModule",{value:!0}),n.SubscriptionChangeEventDispatcher=n.HandlingBase=n.PromiseDispatcherBase=n.PromiseSubscription=n.DispatchError=n.EventManagement=n.EventListBase=n.DispatcherWrapper=n.DispatcherBase=n.Subscription=void 0;const e=B;Object.defineProperty(n,"DispatcherBase",{enumerable:!0,get:function(){return e.DispatcherBase}}),Object.defineProperty(n,"SubscriptionChangeEventDispatcher",{enumerable:!0,get:function(){return e.SubscriptionChangeEventDispatcher}});const a=J;Object.defineProperty(n,"DispatchError",{enumerable:!0,get:function(){return a.DispatchError}});const o=K;Object.defineProperty(n,"DispatcherWrapper",{enumerable:!0,get:function(){return o.DispatcherWrapper}});const t=_e;Object.defineProperty(n,"EventListBase",{enumerable:!0,get:function(){return t.EventListBase}});const i=H;Object.defineProperty(n,"EventManagement",{enumerable:!0,get:function(){return i.EventManagement}});const r=Te;Object.defineProperty(n,"HandlingBase",{enumerable:!0,get:function(){return r.HandlingBase}});const s=ke;Object.defineProperty(n,"PromiseDispatcherBase",{enumerable:!0,get:function(){return s.PromiseDispatcherBase}});const c=z;Object.defineProperty(n,"PromiseSubscription",{enumerable:!0,get:function(){return c.PromiseSubscription}});const m=Y;Object.defineProperty(n,"Subscription",{enumerable:!0,get:function(){return m.Subscription}})}(ge),Object.defineProperty(G,"__esModule",{value:!0}),G.SimpleEventDispatcher=void 0;const oa=ge;class Bo extends oa.DispatcherBase{constructor(){super()}dispatch(e){const a=this._dispatch(!1,this,arguments);if(a==null)throw new oa.DispatchError("Got `null` back from dispatch.");return a}dispatchAsync(e){this._dispatch(!0,this,arguments)}asEvent(){return super.asEvent()}}G.SimpleEventDispatcher=Bo;var ye={},Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.SimpleEventList=void 0;const Uo=ge,Vo=G;class $o extends Uo.EventListBase{constructor(){super()}createDispatcher(){return new Vo.SimpleEventDispatcher}}Q.SimpleEventList=$o,Object.defineProperty(ye,"__esModule",{value:!0}),ye.SimpleEventHandlingBase=void 0;const Go=ge,Ho=Q;class qo extends Go.HandlingBase{constructor(){super(new Ho.SimpleEventList)}}ye.SimpleEventHandlingBase=qo;var ve={};Object.defineProperty(ve,"__esModule",{value:!0}),ve.NonUniformSimpleEventList=void 0;const Wo=G;class Xo{constructor(){this._events={}}get(e){if(this._events[e])return this._events[e];const a=this.createDispatcher();return this._events[e]=a,a}remove(e){delete this._events[e]}createDispatcher(){return new Wo.SimpleEventDispatcher}}ve.NonUniformSimpleEventList=Xo,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.NonUniformSimpleEventList=n.SimpleEventList=n.SimpleEventHandlingBase=n.SimpleEventDispatcher=void 0;const e=G;Object.defineProperty(n,"SimpleEventDispatcher",{enumerable:!0,get:function(){return e.SimpleEventDispatcher}});const a=ye;Object.defineProperty(n,"SimpleEventHandlingBase",{enumerable:!0,get:function(){return a.SimpleEventHandlingBase}});const o=ve;Object.defineProperty(n,"NonUniformSimpleEventList",{enumerable:!0,get:function(){return o.NonUniformSimpleEventList}});const t=Q;Object.defineProperty(n,"SimpleEventList",{enumerable:!0,get:function(){return t.SimpleEventList}})}(_);let Qe=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920];typeof Int32Array<"u"&&(Qe=new Int32Array(Qe));const Ze=(n,e)=>{let a=typeof e<"u"?~~e:65535;for(let o=0;o<n.length;o++)a=(Qe[(a>>8^n[o])&255]^a<<8)&65535;return a};var Ko=Object.defineProperty,y=(n,e)=>{for(var a in e)Ko(n,a,{get:e[a],enumerable:!0})},be="f75c76d2-129e-4dad-a1dd-7866124401e7",Ce="2c55e69e-4993-11ed-b878-0242ac120002",we="ed9da18c-a800-4f66-a670-aa7547e34453",Ee="6ba1b218-15a8-461f-9fa8-5dcae273eafd",Ne=4294967295,Se=2.2,Yo={ToRadioUuid:be,FromRadioUuid:Ce,FromNumUuid:we,ServiceUuid:Ee,broadcastNum:Ne,minFwVer:Se},ia={};y(ia,{Admin:()=>C,AppOnly:()=>St,CannedMessages:()=>Pt,Channel:()=>Fe,ClientOnly:()=>At,Config:()=>Va,ConnectionStatus:()=>_t,DeviceOnly:()=>It,LocalOnly:()=>Rt,Mesh:()=>w,ModuleConfig:()=>ja,Mqtt:()=>Ot,PaxCount:()=>$n,Portnums:()=>g,RemoteHardware:()=>Gn,Rtttl:()=>Ft,StoreForward:()=>Bt,Telemetry:()=>pn,Xmodem:()=>E});var C={};y(C,{AdminMessage:()=>Ji,AdminMessage_ConfigType:()=>Ct,AdminMessage_ModuleConfigType:()=>wt,HamParameters:()=>Et,NodeRemoteHardwarePinsResponse:()=>Nt});function v(n,e){if(!n)throw new Error(e)}var Jo=34028234663852886e22,zo=-34028234663852886e22,Qo=4294967295,Zo=2147483647,jo=-2147483648;function Pe(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>Zo||n<jo)throw new Error("invalid int 32: "+n)}function je(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>Qo||n<0)throw new Error("invalid uint 32: "+n)}function ra(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>Jo||n<zo))throw new Error("invalid float 32: "+n)}var sa=Symbol("@bufbuild/protobuf/enum-type");function ei(n){const e=n[sa];return v(e,"missing enum type on enum object"),e}function ca(n,e,a,o){n[sa]=da(e,a.map(t=>({no:t.no,name:t.name,localName:n[t.no]})))}function da(n,e,a){const o=Object.create(null),t=Object.create(null),i=[];for(const r of e){const s=ma(r);i.push(s),o[r.name]=s,t[r.no]=s}return{typeName:n,values:i,findName(r){return o[r]},findNumber(r){return t[r]}}}function ni(n,e,a){const o={};for(const t of e){const i=ma(t);o[i.localName]=i.no,o[i.no]=i.localName}return ca(o,n,e),o}function ma(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}var la=class{equals(n){return this.getType().runtime.util.equals(this.getType(),this,n)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(n,e){const a=this.getType(),o=a.runtime.bin,t=o.makeReadOptions(e);return o.readMessage(this,t.readerFactory(n),n.byteLength,t),this}fromJson(n,e){const a=this.getType(),o=a.runtime.json,t=o.makeReadOptions(e);return o.readMessage(a,n,t,this),this}fromJsonString(n,e){let a;try{a=JSON.parse(n)}catch(o){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${o instanceof Error?o.message:String(o)}`)}return this.fromJson(a,e)}toBinary(n){const e=this.getType(),a=e.runtime.bin,o=a.makeWriteOptions(n),t=o.writerFactory();return a.writeMessage(this,t,o),t.finish()}toJson(n){const e=this.getType(),a=e.runtime.json,o=a.makeWriteOptions(n);return a.writeMessage(this,o)}toJsonString(n){var e;const a=this.toJson(n);return JSON.stringify(a,null,(e=n==null?void 0:n.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function ai(n,e,a,o){var t;const i=(t=o==null?void 0:o.localName)!==null&&t!==void 0?t:e.substring(e.lastIndexOf(".")+1),r={[i]:function(s){n.util.initFields(this),n.util.initPartial(s,this)}}[i];return Object.setPrototypeOf(r.prototype,new la),Object.assign(r,{runtime:n,typeName:e,fields:n.util.newFieldList(a),fromBinary(s,c){return new r().fromBinary(s,c)},fromJson(s,c){return new r().fromJson(s,c)},fromJsonString(s,c){return new r().fromJsonString(s,c)},equals(s,c){return n.util.equals(r,s,c)}}),r}function ti(){let n=0,e=0;for(let o=0;o<28;o+=7){let t=this.buf[this.pos++];if(n|=(t&127)<<o,!(t&128))return this.assertBounds(),[n,e]}let a=this.buf[this.pos++];if(n|=(a&15)<<28,e=(a&112)>>4,!(a&128))return this.assertBounds(),[n,e];for(let o=3;o<=31;o+=7){let t=this.buf[this.pos++];if(e|=(t&127)<<o,!(t&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function en(n,e,a){for(let i=0;i<28;i=i+7){const r=n>>>i,s=!(!(r>>>7)&&e==0),c=(s?r|128:r)&255;if(a.push(c),!s)return}const o=n>>>28&15|(e&7)<<4,t=!!(e>>3);if(a.push((t?o|128:o)&255),!!t){for(let i=3;i<31;i=i+7){const r=e>>>i,s=!!(r>>>7),c=(s?r|128:r)&255;if(a.push(c),!s)return}a.push(e>>>31&1)}}var Ae=4294967296;function ua(n){const e=n[0]==="-";e&&(n=n.slice(1));const a=1e6;let o=0,t=0;function i(r,s){const c=Number(n.slice(r,s));t*=a,o=o*a+c,o>=Ae&&(t=t+(o/Ae|0),o=o%Ae)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),e?ha(o,t):nn(o,t)}function oi(n,e){let a=nn(n,e);const o=a.hi&2147483648;o&&(a=ha(a.lo,a.hi));const t=fa(a.lo,a.hi);return o?"-"+t:t}function fa(n,e){if({lo:n,hi:e}=ii(n,e),e<=2097151)return String(Ae*e+n);const a=n&16777215,o=(n>>>24|e<<8)&16777215,t=e>>16&65535;let i=a+o*6777216+t*6710656,r=o+t*8147497,s=t*2;const c=1e7;return i>=c&&(r+=Math.floor(i/c),i%=c),r>=c&&(s+=Math.floor(r/c),r%=c),s.toString()+pa(r)+pa(i)}function ii(n,e){return{lo:n>>>0,hi:e>>>0}}function nn(n,e){return{lo:n|0,hi:e|0}}function ha(n,e){return e=~e,n?n=~n+1:e+=1,nn(n,e)}var pa=n=>{const e=String(n);return"0000000".slice(e.length)+e};function ga(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let a=0;a<9;a++)e.push(n&127|128),n=n>>7;e.push(1)}}function ri(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let a=5;n&128&&a<10;a++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function si(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){const t=BigInt("-9223372036854775808"),i=BigInt("9223372036854775807"),r=BigInt("0"),s=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const m=typeof c=="bigint"?c:BigInt(c);if(m>i||m<t)throw new Error(`int64 invalid: ${c}`);return m},uParse(c){const m=typeof c=="bigint"?c:BigInt(c);if(m>s||m<r)throw new Error(`uint64 invalid: ${c}`);return m},enc(c){return n.setBigInt64(0,this.parse(c),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(c){return n.setBigInt64(0,this.uParse(c),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(c,m){return n.setInt32(0,c,!0),n.setInt32(4,m,!0),n.getBigInt64(0,!0)},uDec(c,m){return n.setInt32(0,c,!0),n.setInt32(4,m,!0),n.getBigUint64(0,!0)}}}const a=t=>v(/^-?[0-9]+$/.test(t),`int64 invalid: ${t}`),o=t=>v(/^[0-9]+$/.test(t),`uint64 invalid: ${t}`);return{zero:"0",supported:!1,parse(t){return typeof t!="string"&&(t=t.toString()),a(t),t},uParse(t){return typeof t!="string"&&(t=t.toString()),o(t),t},enc(t){return typeof t!="string"&&(t=t.toString()),a(t),ua(t)},uEnc(t){return typeof t!="string"&&(t=t.toString()),o(t),ua(t)},dec(t,i){return oi(t,i)},uDec(t,i){return fa(t,i)}}}var R=si(),u;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(u||(u={}));var L;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(L||(L={}));function F(n,e,a){if(e===a)return!0;if(n==u.BYTES){if(!(e instanceof Uint8Array)||!(a instanceof Uint8Array)||e.length!==a.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==a[o])return!1;return!0}switch(n){case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return e==a}return!1}function q(n,e){switch(n){case u.BOOL:return!1;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return e==0?R.zero:"0";case u.DOUBLE:case u.FLOAT:return 0;case u.BYTES:return new Uint8Array(0);case u.STRING:return"";default:return 0}}function _a(n,e){switch(n){case u.BOOL:return e===!1;case u.STRING:return e==="";case u.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var b;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(b||(b={}));var ci=class{constructor(n){this.stack=[],this.textEncoder=n??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let n=0;for(let o=0;o<this.chunks.length;o++)n+=this.chunks[o].length;let e=new Uint8Array(n),a=0;for(let o=0;o<this.chunks.length;o++)e.set(this.chunks[o],a),a+=this.chunks[o].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let n=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(n.byteLength),this.raw(n)}tag(n,e){return this.uint32((n<<3|e)>>>0)}raw(n){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(n),this}uint32(n){for(je(n);n>127;)this.buf.push(n&127|128),n=n>>>7;return this.buf.push(n),this}int32(n){return Pe(n),ga(n,this.buf),this}bool(n){return this.buf.push(n?1:0),this}bytes(n){return this.uint32(n.byteLength),this.raw(n)}string(n){let e=this.textEncoder.encode(n);return this.uint32(e.byteLength),this.raw(e)}float(n){ra(n);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,n,!0),this.raw(e)}double(n){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,n,!0),this.raw(e)}fixed32(n){je(n);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,n,!0),this.raw(e)}sfixed32(n){Pe(n);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,n,!0),this.raw(e)}sint32(n){return Pe(n),n=(n<<1^n>>31)>>>0,ga(n,this.buf),this}sfixed64(n){let e=new Uint8Array(8),a=new DataView(e.buffer),o=R.enc(n);return a.setInt32(0,o.lo,!0),a.setInt32(4,o.hi,!0),this.raw(e)}fixed64(n){let e=new Uint8Array(8),a=new DataView(e.buffer),o=R.uEnc(n);return a.setInt32(0,o.lo,!0),a.setInt32(4,o.hi,!0),this.raw(e)}int64(n){let e=R.enc(n);return en(e.lo,e.hi,this.buf),this}sint64(n){let e=R.enc(n),a=e.hi>>31,o=e.lo<<1^a,t=(e.hi<<1|e.lo>>>31)^a;return en(o,t,this.buf),this}uint64(n){let e=R.uEnc(n);return en(e.lo,e.hi,this.buf),this}},di=class{constructor(n,e){this.varint64=ti,this.uint32=ri,this.buf=n,this.len=n.length,this.pos=0,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.textDecoder=e??new TextDecoder}tag(){let n=this.uint32(),e=n>>>3,a=n&7;if(e<=0||a<0||a>5)throw new Error("illegal tag: field no "+e+" wire type "+a);return[e,a]}skip(n){let e=this.pos;switch(n){case b.Varint:for(;this.buf[this.pos++]&128;);break;case b.Bit64:this.pos+=4;case b.Bit32:this.pos+=4;break;case b.LengthDelimited:let a=this.uint32();this.pos+=a;break;case b.StartGroup:let o;for(;(o=this.tag()[1])!==b.EndGroup;)this.skip(o);break;default:throw new Error("cant skip wire type "+n)}return this.assertBounds(),this.buf.subarray(e,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let n=this.uint32();return n>>>1^-(n&1)}int64(){return R.dec(...this.varint64())}uint64(){return R.uDec(...this.varint64())}sint64(){let[n,e]=this.varint64(),a=-(n&1);return n=(n>>>1|(e&1)<<31)^a,e=e>>>1^a,R.dec(n,e)}bool(){let[n,e]=this.varint64();return n!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return R.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return R.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let n=this.uint32(),e=this.pos;return this.pos+=n,this.assertBounds(),this.buf.subarray(e,e+n)}string(){return this.textDecoder.decode(this.bytes())}};function mi(n,e,a,o){let t;return{typeName:e,extendee:a,get field(){if(!t){const i=typeof o=="function"?o():o;i.name=e.split(".").pop(),i.jsonName=`[${e}]`,t=n.util.newFieldList([i]).list()[0]}return t},runtime:n}}function Ta(n){const e=n.field.localName,a=Object.create(null);return a[e]=li(n),[a,()=>a[e]]}function li(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return q(e.T,e.L);case"message":const a=e.T,o=new a;return a.fieldWrapper?a.fieldWrapper.unwrapField(o):o;case"map":throw"map fields are not allowed to be extensions"}}function ui(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let a=n.length-1;a>=0;--a)if(n[a].no==e.no)return[n[a]];return[]}return n.filter(a=>a.no===e.no)}var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Re=[];for(let n=0;n<x.length;n++)Re[x[n].charCodeAt(0)]=n;Re["-".charCodeAt(0)]=x.indexOf("+"),Re["_".charCodeAt(0)]=x.indexOf("/");var ka={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let a=new Uint8Array(e),o=0,t=0,i,r=0;for(let s=0;s<n.length;s++){if(i=Re[n.charCodeAt(s)],i===void 0)switch(n[s]){case"=":t=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(t){case 0:r=i,t=1;break;case 1:a[o++]=r<<2|(i&48)>>4,r=i,t=2;break;case 2:a[o++]=(r&15)<<4|(i&60)>>2,r=i,t=3;break;case 3:a[o++]=(r&3)<<6|i,t=0;break}}if(t==1)throw Error("invalid base64 string.");return a.subarray(0,o)},enc(n){let e="",a=0,o,t=0;for(let i=0;i<n.length;i++)switch(o=n[i],a){case 0:e+=x[o>>2],t=(o&3)<<4,a=1;break;case 1:e+=x[t|o>>4],t=(o&15)<<2,a=2;break;case 2:e+=x[t|o>>6],e+=x[o&63],a=0;break}return a&&(e+=x[t],e+="=",a==1&&(e+="=")),e}};function fi(n,e,a){va(e,n);const o=e.runtime.bin.makeReadOptions(a),t=ui(n.getType().runtime.bin.listUnknownFields(n),e.field),[i,r]=Ta(e);for(const s of t)e.runtime.bin.readField(i,o.readerFactory(s.data),e.field,s.wireType,o);return r()}function hi(n,e,a,o){va(e,n);const t=e.runtime.bin.makeReadOptions(o),i=e.runtime.bin.makeWriteOptions(o);if(ya(n,e)){const m=n.getType().runtime.bin.listUnknownFields(n).filter(l=>l.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const l of m)n.getType().runtime.bin.onUnknownField(n,l.no,l.wireType,l.data)}const r=i.writerFactory();let s=e.field;!s.opt&&!s.repeated&&(s.kind=="enum"||s.kind=="scalar")&&(s=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(s,a,r,i);const c=t.readerFactory(r.finish());for(;c.pos<c.len;){const[m,l]=c.tag(),h=c.skip(l);n.getType().runtime.bin.onUnknownField(n,m,l,h)}}function ya(n,e){const a=n.getType();return e.extendee.typeName===a.typeName&&!!a.runtime.bin.listUnknownFields(n).find(o=>o.no==e.field.no)}function va(n,e){v(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function ba(n,e){const a=n.localName;if(n.repeated)return e[a].length>0;if(n.oneof)return e[n.oneof.localName].case===a;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[a]!==void 0:n.kind=="enum"?e[a]!==n.T.values[0].no:!_a(n.T,e[a]);case"message":return e[a]!==void 0;case"map":return Object.keys(e[a]).length>0}}function Ca(n,e){const a=n.localName,o=!n.opt&&!n.req;if(n.repeated)e[a]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[a]={};break;case"enum":e[a]=o?n.T.values[0].no:void 0;break;case"scalar":e[a]=o?q(n.T,n.L):void 0;break;case"message":e[a]=void 0;break}}function U(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(la.prototype).every(o=>o in n&&typeof n[o]=="function"))return!1;const a=n.getType();return a===null||typeof a!="function"||!("typeName"in a)||typeof a.typeName!="string"?!1:e===void 0?!0:a.typeName==e.typeName}function wa(n,e){return U(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}u.DOUBLE,u.FLOAT,u.INT64,u.UINT64,u.INT32,u.UINT32,u.BOOL,u.STRING,u.BYTES;var Ea={ignoreUnknownFields:!1},Na={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function pi(n){return n?Object.assign(Object.assign({},Ea),n):Ea}function gi(n){return n?Object.assign(Object.assign({},Na),n):Na}var Ie=Symbol(),De=Symbol();function _i(){return{makeReadOptions:pi,makeWriteOptions:gi,readMessage(n,e,a,o){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${D(e)}`);o=o??new n;const t=new Map,i=a.typeRegistry;for(const[r,s]of Object.entries(e)){const c=n.fields.findJsonName(r);if(c){if(c.oneof){if(s===null&&c.kind=="scalar")continue;const m=t.get(c.oneof);if(m!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${c.oneof.name}" present: "${m}", "${r}"`);t.set(c.oneof,r)}Sa(o,s,c,a,n)}else{let m=!1;if(i!=null&&i.findExtension&&r.startsWith("[")&&r.endsWith("]")){const l=i.findExtension(r.substring(1,r.length-1));if(l&&l.extendee.typeName==n.typeName){m=!0;const[h,T]=Ta(l);Sa(h,s,l.field,a,l),hi(o,l,T(),a)}}if(!m&&!a.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${r}" is unknown`)}}return o},writeMessage(n,e){const a=n.getType(),o={};let t;try{for(t of a.fields.byNumber()){if(!ba(t,n)){if(t.req)throw"required field not set";if(!e.emitDefaultValues||!ki(t))continue}const r=t.oneof?n[t.oneof.localName].value:n[t.localName],s=Pa(t,r,e);s!==void 0&&(o[e.useProtoFieldName?t.name:t.jsonName]=s)}const i=e.typeRegistry;if(i!=null&&i.findExtensionFor)for(const r of a.runtime.bin.listUnknownFields(n)){const s=i.findExtensionFor(a.typeName,r.no);if(s&&ya(n,s)){const c=fi(n,s,e),m=Pa(s.field,c,e);m!==void 0&&(o[s.field.jsonName]=m)}}}catch(i){const r=t?`cannot encode field ${a.typeName}.${t.name} to JSON`:`cannot encode message ${a.typeName} to JSON`,s=i instanceof Error?i.message:String(i);throw new Error(r+(s.length>0?`: ${s}`:""))}return o},readScalar(n,e,a){return Z(n,e,a??L.BIGINT,!0)},writeScalar(n,e,a){if(e!==void 0&&(a||_a(n,e)))return Me(n,e)},debug:D}}function D(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Sa(n,e,a,o,t){let i=a.localName;if(a.repeated){if(v(a.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${t.typeName}.${a.name} from JSON: ${D(e)}`);const r=n[i];for(const s of e){if(s===null)throw new Error(`cannot decode field ${t.typeName}.${a.name} from JSON: ${D(s)}`);switch(a.kind){case"message":r.push(a.T.fromJson(s,o));break;case"enum":const c=an(a.T,s,o.ignoreUnknownFields,!0);c!==De&&r.push(c);break;case"scalar":try{r.push(Z(a.T,s,a.L,!0))}catch(m){let l=`cannot decode field ${t.typeName}.${a.name} from JSON: ${D(s)}`;throw m instanceof Error&&m.message.length>0&&(l+=`: ${m.message}`),new Error(l)}break}}}else if(a.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${t.typeName}.${a.name} from JSON: ${D(e)}`);const r=n[i];for(const[s,c]of Object.entries(e)){if(c===null)throw new Error(`cannot decode field ${t.typeName}.${a.name} from JSON: map value null`);let m;try{m=Ti(a.K,s)}catch(l){let h=`cannot decode map key for field ${t.typeName}.${a.name} from JSON: ${D(e)}`;throw l instanceof Error&&l.message.length>0&&(h+=`: ${l.message}`),new Error(h)}switch(a.V.kind){case"message":r[m]=a.V.T.fromJson(c,o);break;case"enum":const l=an(a.V.T,c,o.ignoreUnknownFields,!0);l!==De&&(r[m]=l);break;case"scalar":try{r[m]=Z(a.V.T,c,L.BIGINT,!0)}catch(h){let T=`cannot decode map value for field ${t.typeName}.${a.name} from JSON: ${D(e)}`;throw h instanceof Error&&h.message.length>0&&(T+=`: ${h.message}`),new Error(T)}break}}}else switch(a.oneof&&(n=n[a.oneof.localName]={case:i},i="value"),a.kind){case"message":const r=a.T;if(e===null&&r.typeName!="google.protobuf.Value")return;let s=n[i];U(s)?s.fromJson(e,o):(n[i]=s=r.fromJson(e,o),r.fieldWrapper&&!a.oneof&&(n[i]=r.fieldWrapper.unwrapField(s)));break;case"enum":const c=an(a.T,e,o.ignoreUnknownFields,!1);switch(c){case Ie:Ca(a,n);break;case De:break;default:n[i]=c;break}break;case"scalar":try{const m=Z(a.T,e,a.L,!1);switch(m){case Ie:Ca(a,n);break;default:n[i]=m;break}}catch(m){let l=`cannot decode field ${t.typeName}.${a.name} from JSON: ${D(e)}`;throw m instanceof Error&&m.message.length>0&&(l+=`: ${m.message}`),new Error(l)}break}}function Ti(n,e){if(n===u.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Z(n,e,L.BIGINT,!0).toString()}function Z(n,e,a,o){if(e===null)return o?q(n,a):Ie;switch(n){case u.DOUBLE:case u.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const t=Number(e);if(Number.isNaN(t)||!Number.isFinite(t))break;return n==u.FLOAT&&ra(t),t;case u.INT32:case u.FIXED32:case u.SFIXED32:case u.SINT32:case u.UINT32:let i;if(typeof e=="number"?i=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(i=Number(e)),i===void 0)break;return n==u.UINT32?je(i):Pe(i),i;case u.INT64:case u.SFIXED64:case u.SINT64:if(typeof e!="number"&&typeof e!="string")break;const r=R.parse(e);return a?r.toString():r;case u.FIXED64:case u.UINT64:if(typeof e!="number"&&typeof e!="string")break;const s=R.uParse(e);return a?s.toString():s;case u.BOOL:if(typeof e!="boolean")break;return e;case u.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case u.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return ka.dec(e)}throw new Error}function an(n,e,a,o){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:o?n.values[0].no:Ie;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const t=n.findName(e);if(t!==void 0)return t.no;if(a)return De;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${D(e)}`)}function ki(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Pa(n,e,a){if(n.kind=="map"){v(typeof e=="object"&&e!=null);const o={},t=Object.entries(e);switch(n.V.kind){case"scalar":for(const[r,s]of t)o[r.toString()]=Me(n.V.T,s);break;case"message":for(const[r,s]of t)o[r.toString()]=s.toJson(a);break;case"enum":const i=n.V.T;for(const[r,s]of t)o[r.toString()]=tn(i,s,a.enumAsInteger);break}return a.emitDefaultValues||t.length>0?o:void 0}if(n.repeated){v(Array.isArray(e));const o=[];switch(n.kind){case"scalar":for(let t=0;t<e.length;t++)o.push(Me(n.T,e[t]));break;case"enum":for(let t=0;t<e.length;t++)o.push(tn(n.T,e[t],a.enumAsInteger));break;case"message":for(let t=0;t<e.length;t++)o.push(e[t].toJson(a));break}return a.emitDefaultValues||o.length>0?o:void 0}switch(n.kind){case"scalar":return Me(n.T,e);case"enum":return tn(n.T,e,a.enumAsInteger);case"message":return wa(n.T,e).toJson(a)}}function tn(n,e,a){var o;if(v(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(a)return e;const t=n.findNumber(e);return(o=t==null?void 0:t.name)!==null&&o!==void 0?o:e}function Me(n,e){switch(n){case u.INT32:case u.SFIXED32:case u.SINT32:case u.FIXED32:case u.UINT32:return v(typeof e=="number"),e;case u.FLOAT:case u.DOUBLE:return v(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case u.STRING:return v(typeof e=="string"),e;case u.BOOL:return v(typeof e=="boolean"),e;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return v(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case u.BYTES:return v(e instanceof Uint8Array),ka.enc(e)}}var W=Symbol("@bufbuild/protobuf/unknown-fields"),Aa={readUnknownFields:!0,readerFactory:n=>new di(n)},Ra={writeUnknownFields:!0,writerFactory:()=>new ci};function yi(n){return n?Object.assign(Object.assign({},Aa),n):Aa}function vi(n){return n?Object.assign(Object.assign({},Ra),n):Ra}function bi(){return{makeReadOptions:yi,makeWriteOptions:vi,listUnknownFields(n){var e;return(e=n[W])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[W]},writeUnknownFields(n,e){const o=n[W];if(o)for(const t of o)e.tag(t.no,t.wireType).raw(t.data)},onUnknownField(n,e,a,o){const t=n;Array.isArray(t[W])||(t[W]=[]),t[W].push({no:e,wireType:a,data:o})},readMessage(n,e,a,o,t){const i=n.getType(),r=t?e.len:e.pos+a;let s,c;for(;e.pos<r&&([s,c]=e.tag(),c!=b.EndGroup);){const m=i.fields.find(s);if(!m){const l=e.skip(c);o.readUnknownFields&&this.onUnknownField(n,s,c,l);continue}Ia(n,e,m,c,o)}if(t&&(c!=b.EndGroup||s!==a))throw new Error("invalid end group tag")},readField:Ia,writeMessage(n,e,a){const o=n.getType();for(const t of o.fields.byNumber()){if(!ba(t,n)){if(t.req)throw new Error(`cannot encode field ${o.typeName}.${t.name} to binary: required field not set`);continue}const i=t.oneof?n[t.oneof.localName].value:n[t.localName];Da(t,i,e,a)}return a.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,a,o){e!==void 0&&Da(n,e,a,o)}}}function Ia(n,e,a,o,t){let{repeated:i,localName:r}=a;switch(a.oneof&&(n=n[a.oneof.localName],n.case!=r&&delete n.value,n.case=r,r="value"),a.kind){case"scalar":case"enum":const s=a.kind=="enum"?u.INT32:a.T;let c=Oe;if(a.kind=="scalar"&&a.L>0&&(c=wi),i){let T=n[r];if(o==b.LengthDelimited&&s!=u.STRING&&s!=u.BYTES){let A=e.uint32()+e.pos;for(;e.pos<A;)T.push(c(e,s))}else T.push(c(e,s))}else n[r]=c(e,s);break;case"message":const m=a.T;i?n[r].push(xe(e,new m,t,a)):U(n[r])?xe(e,n[r],t,a):(n[r]=xe(e,new m,t,a),m.fieldWrapper&&!a.oneof&&!a.repeated&&(n[r]=m.fieldWrapper.unwrapField(n[r])));break;case"map":let[l,h]=Ci(a,e,t);n[r][l]=h;break}}function xe(n,e,a,o){const t=e.getType().runtime.bin,i=o==null?void 0:o.delimited;return t.readMessage(e,n,i?o.no:n.uint32(),a,i),e}function Ci(n,e,a){const o=e.uint32(),t=e.pos+o;let i,r;for(;e.pos<t;){const[s]=e.tag();switch(s){case 1:i=Oe(e,n.K);break;case 2:switch(n.V.kind){case"scalar":r=Oe(e,n.V.T);break;case"enum":r=e.int32();break;case"message":r=xe(e,new n.V.T,a,void 0);break}break}}if(i===void 0&&(i=q(n.K,L.BIGINT)),typeof i!="string"&&typeof i!="number"&&(i=i.toString()),r===void 0)switch(n.V.kind){case"scalar":r=q(n.V.T,L.BIGINT);break;case"enum":r=n.V.T.values[0].no;break;case"message":r=new n.V.T;break}return[i,r]}function wi(n,e){const a=Oe(n,e);return typeof a=="bigint"?a.toString():a}function Oe(n,e){switch(e){case u.STRING:return n.string();case u.BOOL:return n.bool();case u.DOUBLE:return n.double();case u.FLOAT:return n.float();case u.INT32:return n.int32();case u.INT64:return n.int64();case u.UINT64:return n.uint64();case u.FIXED64:return n.fixed64();case u.BYTES:return n.bytes();case u.FIXED32:return n.fixed32();case u.SFIXED32:return n.sfixed32();case u.SFIXED64:return n.sfixed64();case u.SINT64:return n.sint64();case u.UINT32:return n.uint32();case u.SINT32:return n.sint32()}}function Da(n,e,a,o){v(e!==void 0);const t=n.repeated;switch(n.kind){case"scalar":case"enum":let i=n.kind=="enum"?u.INT32:n.T;if(t)if(v(Array.isArray(e)),n.packed)Ni(a,i,n.no,e);else for(const r of e)j(a,i,n.no,r);else j(a,i,n.no,e);break;case"message":if(t){v(Array.isArray(e));for(const r of e)Ma(a,o,n,r)}else Ma(a,o,n,e);break;case"map":v(typeof e=="object"&&e!=null);for(const[r,s]of Object.entries(e))Ei(a,o,n,r,s);break}}function Ei(n,e,a,o,t){n.tag(a.no,b.LengthDelimited),n.fork();let i=o;switch(a.K){case u.INT32:case u.FIXED32:case u.UINT32:case u.SFIXED32:case u.SINT32:i=Number.parseInt(o);break;case u.BOOL:v(o=="true"||o=="false"),i=o=="true";break}switch(j(n,a.K,1,i),a.V.kind){case"scalar":j(n,a.V.T,2,t);break;case"enum":j(n,u.INT32,2,t);break;case"message":v(t!==void 0),n.tag(2,b.LengthDelimited).bytes(t.toBinary(e));break}n.join()}function Ma(n,e,a,o){const t=wa(a.T,o);a.delimited?n.tag(a.no,b.StartGroup).raw(t.toBinary(e)).tag(a.no,b.EndGroup):n.tag(a.no,b.LengthDelimited).bytes(t.toBinary(e))}function j(n,e,a,o){v(o!==void 0);let[t,i]=xa(e);n.tag(a,t)[i](o)}function Ni(n,e,a,o){if(!o.length)return;n.tag(a,b.LengthDelimited).fork();let[,t]=xa(e);for(let i=0;i<o.length;i++)n[t](o[i]);n.join()}function xa(n){let e=b.Varint;switch(n){case u.BYTES:case u.STRING:e=b.LengthDelimited;break;case u.DOUBLE:case u.FIXED64:case u.SFIXED64:e=b.Bit64;break;case u.FIXED32:case u.SFIXED32:case u.FLOAT:e=b.Bit32;break}const a=u[n].toLowerCase();return[e,a]}function Si(){return{setEnumType:ca,initPartial(n,e){if(n===void 0)return;const a=e.getType();for(const o of a.fields.byMember()){const t=o.localName,i=e,r=n;if(r[t]!==void 0)switch(o.kind){case"oneof":const s=r[t].case;if(s===void 0)continue;const c=o.findField(s);let m=r[t].value;c&&c.kind=="message"&&!U(m,c.T)?m=new c.T(m):c&&c.kind==="scalar"&&c.T===u.BYTES&&(m=ee(m)),i[t]={case:s,value:m};break;case"scalar":case"enum":let l=r[t];o.T===u.BYTES&&(l=o.repeated?l.map(ee):ee(l)),i[t]=l;break;case"map":switch(o.V.kind){case"scalar":case"enum":if(o.V.T===u.BYTES)for(const[S,A]of Object.entries(r[t]))i[t][S]=ee(A);else Object.assign(i[t],r[t]);break;case"message":const T=o.V.T;for(const S of Object.keys(r[t])){let A=r[t][S];T.fieldWrapper||(A=new T(A)),i[t][S]=A}break}break;case"message":const h=o.T;if(o.repeated)i[t]=r[t].map(T=>U(T,h)?T:new h(T));else{const T=r[t];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?i[t]=ee(T):i[t]=T:i[t]=U(T,h)?T:new h(T)}break}}},equals(n,e,a){return e===a?!0:!e||!a?!1:n.fields.byMember().every(o=>{const t=e[o.localName],i=a[o.localName];if(o.repeated){if(t.length!==i.length)return!1;switch(o.kind){case"message":return t.every((r,s)=>o.T.equals(r,i[s]));case"scalar":return t.every((r,s)=>F(o.T,r,i[s]));case"enum":return t.every((r,s)=>F(u.INT32,r,i[s]))}throw new Error(`repeated cannot contain ${o.kind}`)}switch(o.kind){case"message":return o.T.equals(t,i);case"enum":return F(u.INT32,t,i);case"scalar":return F(o.T,t,i);case"oneof":if(t.case!==i.case)return!1;const r=o.findField(t.case);if(r===void 0)return!0;switch(r.kind){case"message":return r.T.equals(t.value,i.value);case"enum":return F(u.INT32,t.value,i.value);case"scalar":return F(r.T,t.value,i.value)}throw new Error(`oneof cannot contain ${r.kind}`);case"map":const s=Object.keys(t).concat(Object.keys(i));switch(o.V.kind){case"message":const c=o.V.T;return s.every(l=>c.equals(t[l],i[l]));case"enum":return s.every(l=>F(u.INT32,t[l],i[l]));case"scalar":const m=o.V.T;return s.every(l=>F(m,t[l],i[l]))}break}})},clone(n){const e=n.getType(),a=new e,o=a;for(const t of e.fields.byMember()){const i=n[t.localName];let r;if(t.repeated)r=i.map(Le);else if(t.kind=="map"){r=o[t.localName];for(const[s,c]of Object.entries(i))r[s]=Le(c)}else t.kind=="oneof"?r=t.findField(i.case)?{case:i.case,value:Le(i.value)}:{case:void 0}:r=Le(i);o[t.localName]=r}return a}}}function Le(n){if(n===void 0)return n;if(U(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function ee(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function Pi(n,e,a){return{syntax:n,json:_i(),bin:bi(),util:Object.assign(Object.assign({},Si()),{newFieldList:e,initFields:a}),makeMessageType(o,t,i){return ai(this,o,t,i)},makeEnum:ni,makeEnumType:da,getEnumType:ei,makeExtension(o,t,i){return mi(this,o,t,i)}}}var Ai=class{constructor(n,e){this._fields=n,this._normalizer=e}findJsonName(n){if(!this.jsonNames){const e={};for(const a of this.list())e[a.jsonName]=e[a.name]=a;this.jsonNames=e}return this.jsonNames[n]}find(n){if(!this.numbers){const e={};for(const a of this.list())e[a.no]=a;this.numbers=e}return this.numbers[n]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((n,e)=>n.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const n=this.members;let e;for(const a of this.list())a.oneof?a.oneof!==e&&(e=a.oneof,n.push(e)):n.push(a)}return this.members}};function Oa(n,e){const a=La(n);return e?a:Oi(xi(a))}function Ri(n){return Oa(n,!1)}var Ii=La;function La(n){let e=!1;const a=[];for(let o=0;o<n.length;o++){let t=n.charAt(o);switch(t){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":a.push(t),e=!1;break;default:e&&(e=!1,t=t.toUpperCase()),a.push(t);break}}return a.join("")}var Di=new Set(["constructor","toString","toJSON","valueOf"]),Mi=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Fa=n=>`${n}$`,xi=n=>Mi.has(n)?Fa(n):n,Oi=n=>Di.has(n)?Fa(n):n,Li=class{constructor(n){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=n,this.localName=Ri(n)}addField(n){v(n.oneof===this,`field ${n.name} not one of ${this.name}`),this.fields.push(n)}findField(n){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[n]}};function Fi(n,e){var a,o,t,i,r,s;const c=[];let m;for(const l of typeof n=="function"?n():n){const h=l;if(h.localName=Oa(l.name,l.oneof!==void 0),h.jsonName=(a=l.jsonName)!==null&&a!==void 0?a:Ii(l.name),h.repeated=(o=l.repeated)!==null&&o!==void 0?o:!1,l.kind=="scalar"&&(h.L=(t=l.L)!==null&&t!==void 0?t:L.BIGINT),h.delimited=(i=l.delimited)!==null&&i!==void 0?i:!1,h.req=(r=l.req)!==null&&r!==void 0?r:!1,h.opt=(s=l.opt)!==null&&s!==void 0?s:!1,l.packed===void 0&&(e?h.packed=l.kind=="enum"||l.kind=="scalar"&&l.T!=u.BYTES&&l.T!=u.STRING:h.packed=!1),l.oneof!==void 0){const T=typeof l.oneof=="string"?l.oneof:l.oneof.name;(!m||m.name!=T)&&(m=new Li(T)),h.oneof=m,m.addField(h)}c.push(h)}return c}var d=Pi("proto3",n=>new Ai(n,e=>Fi(e,!0)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const a=e.localName,o=n;if(e.repeated){o[a]=[];continue}switch(e.kind){case"oneof":o[a]={case:void 0};break;case"enum":o[a]=0;break;case"map":o[a]={};break;case"scalar":o[a]=q(e.T,e.L);break}}}),Fe={};y(Fe,{Channel:()=>ne,ChannelSettings:()=>on,Channel_Role:()=>Ua,ModuleSettings:()=>Ba});var on=d.makeMessageType("meshtastic.ChannelSettings",()=>[{no:1,name:"channel_num",kind:"scalar",T:13},{no:2,name:"psk",kind:"scalar",T:12},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"id",kind:"scalar",T:7},{no:5,name:"uplink_enabled",kind:"scalar",T:8},{no:6,name:"downlink_enabled",kind:"scalar",T:8},{no:7,name:"module_settings",kind:"message",T:Ba}]),Ba=d.makeMessageType("meshtastic.ModuleSettings",()=>[{no:1,name:"position_precision",kind:"scalar",T:13}]),ne=d.makeMessageType("meshtastic.Channel",()=>[{no:1,name:"index",kind:"scalar",T:5},{no:2,name:"settings",kind:"message",T:on},{no:3,name:"role",kind:"enum",T:d.getEnumType(Ua)}]),Ua=d.makeEnum("meshtastic.Channel.Role",[{no:0,name:"DISABLED"},{no:1,name:"PRIMARY"},{no:2,name:"SECONDARY"}]),w={};y(w,{Compressed:()=>Ki,Constants:()=>$i,CriticalErrorCode:()=>Gi,Data:()=>ct,DeviceMetadata:()=>Ln,FromRadio:()=>Wi,HardwareModel:()=>He,Heartbeat:()=>gt,LogRecord:()=>ut,LogRecord_Level:()=>ft,MeshPacket:()=>V,MeshPacket_Delayed:()=>mt,MeshPacket_Priority:()=>dt,MqttClientProxyMessage:()=>xn,MyNodeInfo:()=>On,Neighbor:()=>pt,NeighborInfo:()=>Yi,NodeInfo:()=>lt,NodeRemoteHardwarePin:()=>Fn,Position:()=>In,Position_AltSource:()=>rt,Position_LocSource:()=>Dn,QueueStatus:()=>ht,RouteDiscovery:()=>Mn,Routing:()=>Hi,Routing_Error:()=>st,ToRadio:()=>Xi,User:()=>X,Waypoint:()=>qi});var Va={};y(Va,{Config:()=>Be,Config_BluetoothConfig:()=>fn,Config_BluetoothConfig_PairingMode:()=>Ja,Config_DeviceConfig:()=>rn,Config_DeviceConfig_RebroadcastMode:()=>$a,Config_DeviceConfig_Role:()=>ae,Config_DisplayConfig:()=>mn,Config_DisplayConfig_DisplayMode:()=>Ya,Config_DisplayConfig_DisplayUnits:()=>Xa,Config_DisplayConfig_GpsCoordinateFormat:()=>Wa,Config_DisplayConfig_OledType:()=>Ka,Config_LoRaConfig:()=>Ue,Config_LoRaConfig_ModemPreset:()=>un,Config_LoRaConfig_RegionCode:()=>ln,Config_NetworkConfig:()=>dn,Config_NetworkConfig_AddressMode:()=>Ha,Config_NetworkConfig_IpV4Config:()=>qa,Config_PositionConfig:()=>sn,Config_PositionConfig_GpsMode:()=>Ga,Config_PositionConfig_PositionFlags:()=>Bi,Config_PowerConfig:()=>cn});var Be=d.makeMessageType("meshtastic.Config",()=>[{no:1,name:"device",kind:"message",T:rn,oneof:"payload_variant"},{no:2,name:"position",kind:"message",T:sn,oneof:"payload_variant"},{no:3,name:"power",kind:"message",T:cn,oneof:"payload_variant"},{no:4,name:"network",kind:"message",T:dn,oneof:"payload_variant"},{no:5,name:"display",kind:"message",T:mn,oneof:"payload_variant"},{no:6,name:"lora",kind:"message",T:Ue,oneof:"payload_variant"},{no:7,name:"bluetooth",kind:"message",T:fn,oneof:"payload_variant"}]),rn=d.makeMessageType("meshtastic.Config.DeviceConfig",()=>[{no:1,name:"role",kind:"enum",T:d.getEnumType(ae)},{no:2,name:"serial_enabled",kind:"scalar",T:8},{no:3,name:"debug_log_enabled",kind:"scalar",T:8},{no:4,name:"button_gpio",kind:"scalar",T:13},{no:5,name:"buzzer_gpio",kind:"scalar",T:13},{no:6,name:"rebroadcast_mode",kind:"enum",T:d.getEnumType($a)},{no:7,name:"node_info_broadcast_secs",kind:"scalar",T:13},{no:8,name:"double_tap_as_button_press",kind:"scalar",T:8},{no:9,name:"is_managed",kind:"scalar",T:8},{no:10,name:"disable_triple_click",kind:"scalar",T:8}],{localName:"Config_DeviceConfig"}),ae=d.makeEnum("meshtastic.Config.DeviceConfig.Role",[{no:0,name:"CLIENT"},{no:1,name:"CLIENT_MUTE"},{no:2,name:"ROUTER"},{no:3,name:"ROUTER_CLIENT"},{no:4,name:"REPEATER"},{no:5,name:"TRACKER"},{no:6,name:"SENSOR"},{no:7,name:"TAK"},{no:8,name:"CLIENT_HIDDEN"},{no:9,name:"LOST_AND_FOUND"},{no:10,name:"TAK_TRACKER"}]),$a=d.makeEnum("meshtastic.Config.DeviceConfig.RebroadcastMode",[{no:0,name:"ALL"},{no:1,name:"ALL_SKIP_DECODING"},{no:2,name:"LOCAL_ONLY"},{no:3,name:"KNOWN_ONLY"}]),sn=d.makeMessageType("meshtastic.Config.PositionConfig",()=>[{no:1,name:"position_broadcast_secs",kind:"scalar",T:13},{no:2,name:"position_broadcast_smart_enabled",kind:"scalar",T:8},{no:3,name:"fixed_position",kind:"scalar",T:8},{no:4,name:"gps_enabled",kind:"scalar",T:8},{no:5,name:"gps_update_interval",kind:"scalar",T:13},{no:6,name:"gps_attempt_time",kind:"scalar",T:13},{no:7,name:"position_flags",kind:"scalar",T:13},{no:8,name:"rx_gpio",kind:"scalar",T:13},{no:9,name:"tx_gpio",kind:"scalar",T:13},{no:10,name:"broadcast_smart_minimum_distance",kind:"scalar",T:13},{no:11,name:"broadcast_smart_minimum_interval_secs",kind:"scalar",T:13},{no:12,name:"gps_en_gpio",kind:"scalar",T:13},{no:13,name:"gps_mode",kind:"enum",T:d.getEnumType(Ga)}],{localName:"Config_PositionConfig"}),Bi=d.makeEnum("meshtastic.Config.PositionConfig.PositionFlags",[{no:0,name:"UNSET"},{no:1,name:"ALTITUDE"},{no:2,name:"ALTITUDE_MSL"},{no:4,name:"GEOIDAL_SEPARATION"},{no:8,name:"DOP"},{no:16,name:"HVDOP"},{no:32,name:"SATINVIEW"},{no:64,name:"SEQ_NO"},{no:128,name:"TIMESTAMP"},{no:256,name:"HEADING"},{no:512,name:"SPEED"}]),Ga=d.makeEnum("meshtastic.Config.PositionConfig.GpsMode",[{no:0,name:"DISABLED"},{no:1,name:"ENABLED"},{no:2,name:"NOT_PRESENT"}]),cn=d.makeMessageType("meshtastic.Config.PowerConfig",()=>[{no:1,name:"is_power_saving",kind:"scalar",T:8},{no:2,name:"on_battery_shutdown_after_secs",kind:"scalar",T:13},{no:3,name:"adc_multiplier_override",kind:"scalar",T:2},{no:4,name:"wait_bluetooth_secs",kind:"scalar",T:13},{no:6,name:"sds_secs",kind:"scalar",T:13},{no:7,name:"ls_secs",kind:"scalar",T:13},{no:8,name:"min_wake_secs",kind:"scalar",T:13},{no:9,name:"device_battery_ina_address",kind:"scalar",T:13}],{localName:"Config_PowerConfig"}),dn=d.makeMessageType("meshtastic.Config.NetworkConfig",()=>[{no:1,name:"wifi_enabled",kind:"scalar",T:8},{no:3,name:"wifi_ssid",kind:"scalar",T:9},{no:4,name:"wifi_psk",kind:"scalar",T:9},{no:5,name:"ntp_server",kind:"scalar",T:9},{no:6,name:"eth_enabled",kind:"scalar",T:8},{no:7,name:"address_mode",kind:"enum",T:d.getEnumType(Ha)},{no:8,name:"ipv4_config",kind:"message",T:qa},{no:9,name:"rsyslog_server",kind:"scalar",T:9}],{localName:"Config_NetworkConfig"}),Ha=d.makeEnum("meshtastic.Config.NetworkConfig.AddressMode",[{no:0,name:"DHCP"},{no:1,name:"STATIC"}]),qa=d.makeMessageType("meshtastic.Config.NetworkConfig.IpV4Config",()=>[{no:1,name:"ip",kind:"scalar",T:7},{no:2,name:"gateway",kind:"scalar",T:7},{no:3,name:"subnet",kind:"scalar",T:7},{no:4,name:"dns",kind:"scalar",T:7}],{localName:"Config_NetworkConfig_IpV4Config"}),mn=d.makeMessageType("meshtastic.Config.DisplayConfig",()=>[{no:1,name:"screen_on_secs",kind:"scalar",T:13},{no:2,name:"gps_format",kind:"enum",T:d.getEnumType(Wa)},{no:3,name:"auto_screen_carousel_secs",kind:"scalar",T:13},{no:4,name:"compass_north_top",kind:"scalar",T:8},{no:5,name:"flip_screen",kind:"scalar",T:8},{no:6,name:"units",kind:"enum",T:d.getEnumType(Xa)},{no:7,name:"oled",kind:"enum",T:d.getEnumType(Ka)},{no:8,name:"displaymode",kind:"enum",T:d.getEnumType(Ya)},{no:9,name:"heading_bold",kind:"scalar",T:8},{no:10,name:"wake_on_tap_or_motion",kind:"scalar",T:8}],{localName:"Config_DisplayConfig"}),Wa=d.makeEnum("meshtastic.Config.DisplayConfig.GpsCoordinateFormat",[{no:0,name:"DEC"},{no:1,name:"DMS"},{no:2,name:"UTM"},{no:3,name:"MGRS"},{no:4,name:"OLC"},{no:5,name:"OSGR"}]),Xa=d.makeEnum("meshtastic.Config.DisplayConfig.DisplayUnits",[{no:0,name:"METRIC"},{no:1,name:"IMPERIAL"}]),Ka=d.makeEnum("meshtastic.Config.DisplayConfig.OledType",[{no:0,name:"OLED_AUTO"},{no:1,name:"OLED_SSD1306"},{no:2,name:"OLED_SH1106"},{no:3,name:"OLED_SH1107"}]),Ya=d.makeEnum("meshtastic.Config.DisplayConfig.DisplayMode",[{no:0,name:"DEFAULT"},{no:1,name:"TWOCOLOR"},{no:2,name:"INVERTED"},{no:3,name:"COLOR"}]),Ue=d.makeMessageType("meshtastic.Config.LoRaConfig",()=>[{no:1,name:"use_preset",kind:"scalar",T:8},{no:2,name:"modem_preset",kind:"enum",T:d.getEnumType(un)},{no:3,name:"bandwidth",kind:"scalar",T:13},{no:4,name:"spread_factor",kind:"scalar",T:13},{no:5,name:"coding_rate",kind:"scalar",T:13},{no:6,name:"frequency_offset",kind:"scalar",T:2},{no:7,name:"region",kind:"enum",T:d.getEnumType(ln)},{no:8,name:"hop_limit",kind:"scalar",T:13},{no:9,name:"tx_enabled",kind:"scalar",T:8},{no:10,name:"tx_power",kind:"scalar",T:5},{no:11,name:"channel_num",kind:"scalar",T:13},{no:12,name:"override_duty_cycle",kind:"scalar",T:8},{no:13,name:"sx126x_rx_boosted_gain",kind:"scalar",T:8},{no:14,name:"override_frequency",kind:"scalar",T:2},{no:103,name:"ignore_incoming",kind:"scalar",T:13,repeated:!0},{no:104,name:"ignore_mqtt",kind:"scalar",T:8}],{localName:"Config_LoRaConfig"}),ln=d.makeEnum("meshtastic.Config.LoRaConfig.RegionCode",[{no:0,name:"UNSET"},{no:1,name:"US"},{no:2,name:"EU_433"},{no:3,name:"EU_868"},{no:4,name:"CN"},{no:5,name:"JP"},{no:6,name:"ANZ"},{no:7,name:"KR"},{no:8,name:"TW"},{no:9,name:"RU"},{no:10,name:"IN"},{no:11,name:"NZ_865"},{no:12,name:"TH"},{no:13,name:"LORA_24"},{no:14,name:"UA_433"},{no:15,name:"UA_868"},{no:16,name:"MY_433"},{no:17,name:"MY_919"},{no:18,name:"SG_923"}]),un=d.makeEnum("meshtastic.Config.LoRaConfig.ModemPreset",[{no:0,name:"LONG_FAST"},{no:1,name:"LONG_SLOW"},{no:2,name:"VERY_LONG_SLOW"},{no:3,name:"MEDIUM_SLOW"},{no:4,name:"MEDIUM_FAST"},{no:5,name:"SHORT_SLOW"},{no:6,name:"SHORT_FAST"},{no:7,name:"LONG_MODERATE"}]),fn=d.makeMessageType("meshtastic.Config.BluetoothConfig",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"mode",kind:"enum",T:d.getEnumType(Ja)},{no:3,name:"fixed_pin",kind:"scalar",T:13}],{localName:"Config_BluetoothConfig"}),Ja=d.makeEnum("meshtastic.Config.BluetoothConfig.PairingMode",[{no:0,name:"RANDOM_PIN"},{no:1,name:"FIXED_PIN"},{no:2,name:"NO_PIN"}]),g={};y(g,{PortNum:()=>hn});var hn=d.makeEnum("meshtastic.PortNum",[{no:0,name:"UNKNOWN_APP"},{no:1,name:"TEXT_MESSAGE_APP"},{no:2,name:"REMOTE_HARDWARE_APP"},{no:3,name:"POSITION_APP"},{no:4,name:"NODEINFO_APP"},{no:5,name:"ROUTING_APP"},{no:6,name:"ADMIN_APP"},{no:7,name:"TEXT_MESSAGE_COMPRESSED_APP"},{no:8,name:"WAYPOINT_APP"},{no:9,name:"AUDIO_APP"},{no:10,name:"DETECTION_SENSOR_APP"},{no:32,name:"REPLY_APP"},{no:33,name:"IP_TUNNEL_APP"},{no:34,name:"PAXCOUNTER_APP"},{no:64,name:"SERIAL_APP"},{no:65,name:"STORE_FORWARD_APP"},{no:66,name:"RANGE_TEST_APP"},{no:67,name:"TELEMETRY_APP"},{no:68,name:"ZPS_APP"},{no:69,name:"SIMULATOR_APP"},{no:70,name:"TRACEROUTE_APP"},{no:71,name:"NEIGHBORINFO_APP"},{no:72,name:"ATAK_PLUGIN"},{no:73,name:"MAP_REPORT_APP"},{no:256,name:"PRIVATE_APP"},{no:257,name:"ATAK_FORWARDER"},{no:511,name:"MAX"}]),pn={};y(pn,{AirQualityMetrics:()=>Za,DeviceMetrics:()=>Ve,EnvironmentMetrics:()=>za,PowerMetrics:()=>Qa,Telemetry:()=>Vi,TelemetrySensorType:()=>Ui});var Ui=d.makeEnum("meshtastic.TelemetrySensorType",[{no:0,name:"SENSOR_UNSET"},{no:1,name:"BME280"},{no:2,name:"BME680"},{no:3,name:"MCP9808"},{no:4,name:"INA260"},{no:5,name:"INA219"},{no:6,name:"BMP280"},{no:7,name:"SHTC3"},{no:8,name:"LPS22"},{no:9,name:"QMC6310"},{no:10,name:"QMI8658"},{no:11,name:"QMC5883L"},{no:12,name:"SHT31"},{no:13,name:"PMSA003I"},{no:14,name:"INA3221"},{no:15,name:"BMP085"}]),Ve=d.makeMessageType("meshtastic.DeviceMetrics",()=>[{no:1,name:"battery_level",kind:"scalar",T:13},{no:2,name:"voltage",kind:"scalar",T:2},{no:3,name:"channel_utilization",kind:"scalar",T:2},{no:4,name:"air_util_tx",kind:"scalar",T:2}]),za=d.makeMessageType("meshtastic.EnvironmentMetrics",()=>[{no:1,name:"temperature",kind:"scalar",T:2},{no:2,name:"relative_humidity",kind:"scalar",T:2},{no:3,name:"barometric_pressure",kind:"scalar",T:2},{no:4,name:"gas_resistance",kind:"scalar",T:2},{no:5,name:"voltage",kind:"scalar",T:2},{no:6,name:"current",kind:"scalar",T:2}]),Qa=d.makeMessageType("meshtastic.PowerMetrics",()=>[{no:1,name:"ch1_voltage",kind:"scalar",T:2},{no:2,name:"ch1_current",kind:"scalar",T:2},{no:3,name:"ch2_voltage",kind:"scalar",T:2},{no:4,name:"ch2_current",kind:"scalar",T:2},{no:5,name:"ch3_voltage",kind:"scalar",T:2},{no:6,name:"ch3_current",kind:"scalar",T:2}]),Za=d.makeMessageType("meshtastic.AirQualityMetrics",()=>[{no:1,name:"pm10_standard",kind:"scalar",T:13},{no:2,name:"pm25_standard",kind:"scalar",T:13},{no:3,name:"pm100_standard",kind:"scalar",T:13},{no:4,name:"pm10_environmental",kind:"scalar",T:13},{no:5,name:"pm25_environmental",kind:"scalar",T:13},{no:6,name:"pm100_environmental",kind:"scalar",T:13},{no:7,name:"particles_03um",kind:"scalar",T:13},{no:8,name:"particles_05um",kind:"scalar",T:13},{no:9,name:"particles_10um",kind:"scalar",T:13},{no:10,name:"particles_25um",kind:"scalar",T:13},{no:11,name:"particles_50um",kind:"scalar",T:13},{no:12,name:"particles_100um",kind:"scalar",T:13}]),Vi=d.makeMessageType("meshtastic.Telemetry",()=>[{no:1,name:"time",kind:"scalar",T:7},{no:2,name:"device_metrics",kind:"message",T:Ve,oneof:"variant"},{no:3,name:"environment_metrics",kind:"message",T:za,oneof:"variant"},{no:4,name:"air_quality_metrics",kind:"message",T:Za,oneof:"variant"},{no:5,name:"power_metrics",kind:"message",T:Qa,oneof:"variant"}]),ja={};y(ja,{ModuleConfig:()=>$e,ModuleConfig_AmbientLightingConfig:()=>Pn,ModuleConfig_AudioConfig:()=>yn,ModuleConfig_AudioConfig_Audio_Baud:()=>at,ModuleConfig_CannedMessageConfig:()=>Sn,ModuleConfig_CannedMessageConfig_InputEventChar:()=>Ge,ModuleConfig_DetectionSensorConfig:()=>kn,ModuleConfig_ExternalNotificationConfig:()=>Cn,ModuleConfig_MQTTConfig:()=>gn,ModuleConfig_MapReportSettings:()=>nt,ModuleConfig_NeighborInfoConfig:()=>Tn,ModuleConfig_PaxcounterConfig:()=>vn,ModuleConfig_RangeTestConfig:()=>En,ModuleConfig_RemoteHardwareConfig:()=>_n,ModuleConfig_SerialConfig:()=>bn,ModuleConfig_SerialConfig_Serial_Baud:()=>tt,ModuleConfig_SerialConfig_Serial_Mode:()=>ot,ModuleConfig_StoreForwardConfig:()=>wn,ModuleConfig_TelemetryConfig:()=>Nn,RemoteHardwarePin:()=>An,RemoteHardwarePinType:()=>et});var et=d.makeEnum("meshtastic.RemoteHardwarePinType",[{no:0,name:"UNKNOWN"},{no:1,name:"DIGITAL_READ"},{no:2,name:"DIGITAL_WRITE"}]),$e=d.makeMessageType("meshtastic.ModuleConfig",()=>[{no:1,name:"mqtt",kind:"message",T:gn,oneof:"payload_variant"},{no:2,name:"serial",kind:"message",T:bn,oneof:"payload_variant"},{no:3,name:"external_notification",kind:"message",T:Cn,oneof:"payload_variant"},{no:4,name:"store_forward",kind:"message",T:wn,oneof:"payload_variant"},{no:5,name:"range_test",kind:"message",T:En,oneof:"payload_variant"},{no:6,name:"telemetry",kind:"message",T:Nn,oneof:"payload_variant"},{no:7,name:"canned_message",kind:"message",T:Sn,oneof:"payload_variant"},{no:8,name:"audio",kind:"message",T:yn,oneof:"payload_variant"},{no:9,name:"remote_hardware",kind:"message",T:_n,oneof:"payload_variant"},{no:10,name:"neighbor_info",kind:"message",T:Tn,oneof:"payload_variant"},{no:11,name:"ambient_lighting",kind:"message",T:Pn,oneof:"payload_variant"},{no:12,name:"detection_sensor",kind:"message",T:kn,oneof:"payload_variant"},{no:13,name:"paxcounter",kind:"message",T:vn,oneof:"payload_variant"}]),gn=d.makeMessageType("meshtastic.ModuleConfig.MQTTConfig",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"address",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"password",kind:"scalar",T:9},{no:5,name:"encryption_enabled",kind:"scalar",T:8},{no:6,name:"json_enabled",kind:"scalar",T:8},{no:7,name:"tls_enabled",kind:"scalar",T:8},{no:8,name:"root",kind:"scalar",T:9},{no:9,name:"proxy_to_client_enabled",kind:"scalar",T:8},{no:10,name:"map_reporting_enabled",kind:"scalar",T:8},{no:11,name:"map_report_settings",kind:"message",T:nt}],{localName:"ModuleConfig_MQTTConfig"}),nt=d.makeMessageType("meshtastic.ModuleConfig.MapReportSettings",()=>[{no:1,name:"publish_interval_secs",kind:"scalar",T:13},{no:2,name:"position_precision",kind:"scalar",T:13}],{localName:"ModuleConfig_MapReportSettings"}),_n=d.makeMessageType("meshtastic.ModuleConfig.RemoteHardwareConfig",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"allow_undefined_pin_access",kind:"scalar",T:8},{no:3,name:"available_pins",kind:"message",T:An,repeated:!0}],{localName:"ModuleConfig_RemoteHardwareConfig"}),Tn=d.makeMessageType("meshtastic.ModuleConfig.NeighborInfoConfig",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"update_interval",kind:"scalar",T:13}],{localName:"ModuleConfig_NeighborInfoConfig"}),kn=d.makeMessageType("meshtastic.ModuleConfig.DetectionSensorConfig",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"minimum_broadcast_secs",kind:"scalar",T:13},{no:3,name:"state_broadcast_secs",kind:"scalar",T:13},{no:4,name:"send_bell",kind:"scalar",T:8},{no:5,name:"name",kind:"scalar",T:9},{no:6,name:"monitor_pin",kind:"scalar",T:13},{no:7,name:"detection_triggered_high",kind:"scalar",T:8},{no:8,name:"use_pullup",kind:"scalar",T:8}],{localName:"ModuleConfig_DetectionSensorConfig"}),yn=d.makeMessageType("meshtastic.ModuleConfig.AudioConfig",()=>[{no:1,name:"codec2_enabled",kind:"scalar",T:8},{no:2,name:"ptt_pin",kind:"scalar",T:13},{no:3,name:"bitrate",kind:"enum",T:d.getEnumType(at)},{no:4,name:"i2s_ws",kind:"scalar",T:13},{no:5,name:"i2s_sd",kind:"scalar",T:13},{no:6,name:"i2s_din",kind:"scalar",T:13},{no:7,name:"i2s_sck",kind:"scalar",T:13}],{localName:"ModuleConfig_AudioConfig"}),at=d.makeEnum("meshtastic.ModuleConfig.AudioConfig.Audio_Baud",[{no:0,name:"CODEC2_DEFAULT"},{no:1,name:"CODEC2_3200"},{no:2,name:"CODEC2_2400"},{no:3,name:"CODEC2_1600"},{no:4,name:"CODEC2_1400"},{no:5,name:"CODEC2_1300"},{no:6,name:"CODEC2_1200"},{no:7,name:"CODEC2_700"},{no:8,name:"CODEC2_700B"}]),vn=d.makeMessageType("meshtastic.ModuleConfig.PaxcounterConfig",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"paxcounter_update_interval",kind:"scalar",T:13}],{localName:"ModuleConfig_PaxcounterConfig"}),bn=d.makeMessageType("meshtastic.ModuleConfig.SerialConfig",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"echo",kind:"scalar",T:8},{no:3,name:"rxd",kind:"scalar",T:13},{no:4,name:"txd",kind:"scalar",T:13},{no:5,name:"baud",kind:"enum",T:d.getEnumType(tt)},{no:6,name:"timeout",kind:"scalar",T:13},{no:7,name:"mode",kind:"enum",T:d.getEnumType(ot)},{no:8,name:"override_console_serial_port",kind:"scalar",T:8}],{localName:"ModuleConfig_SerialConfig"}),tt=d.makeEnum("meshtastic.ModuleConfig.SerialConfig.Serial_Baud",[{no:0,name:"BAUD_DEFAULT"},{no:1,name:"BAUD_110"},{no:2,name:"BAUD_300"},{no:3,name:"BAUD_600"},{no:4,name:"BAUD_1200"},{no:5,name:"BAUD_2400"},{no:6,name:"BAUD_4800"},{no:7,name:"BAUD_9600"},{no:8,name:"BAUD_19200"},{no:9,name:"BAUD_38400"},{no:10,name:"BAUD_57600"},{no:11,name:"BAUD_115200"},{no:12,name:"BAUD_230400"},{no:13,name:"BAUD_460800"},{no:14,name:"BAUD_576000"},{no:15,name:"BAUD_921600"}]),ot=d.makeEnum("meshtastic.ModuleConfig.SerialConfig.Serial_Mode",[{no:0,name:"DEFAULT"},{no:1,name:"SIMPLE"},{no:2,name:"PROTO"},{no:3,name:"TEXTMSG"},{no:4,name:"NMEA"},{no:5,name:"CALTOPO"}]),Cn=d.makeMessageType("meshtastic.ModuleConfig.ExternalNotificationConfig",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"output_ms",kind:"scalar",T:13},{no:3,name:"output",kind:"scalar",T:13},{no:8,name:"output_vibra",kind:"scalar",T:13},{no:9,name:"output_buzzer",kind:"scalar",T:13},{no:4,name:"active",kind:"scalar",T:8},{no:5,name:"alert_message",kind:"scalar",T:8},{no:10,name:"alert_message_vibra",kind:"scalar",T:8},{no:11,name:"alert_message_buzzer",kind:"scalar",T:8},{no:6,name:"alert_bell",kind:"scalar",T:8},{no:12,name:"alert_bell_vibra",kind:"scalar",T:8},{no:13,name:"alert_bell_buzzer",kind:"scalar",T:8},{no:7,name:"use_pwm",kind:"scalar",T:8},{no:14,name:"nag_timeout",kind:"scalar",T:13},{no:15,name:"use_i2s_as_buzzer",kind:"scalar",T:8}],{localName:"ModuleConfig_ExternalNotificationConfig"}),wn=d.makeMessageType("meshtastic.ModuleConfig.StoreForwardConfig",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"heartbeat",kind:"scalar",T:8},{no:3,name:"records",kind:"scalar",T:13},{no:4,name:"history_return_max",kind:"scalar",T:13},{no:5,name:"history_return_window",kind:"scalar",T:13}],{localName:"ModuleConfig_StoreForwardConfig"}),En=d.makeMessageType("meshtastic.ModuleConfig.RangeTestConfig",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"sender",kind:"scalar",T:13},{no:3,name:"save",kind:"scalar",T:8}],{localName:"ModuleConfig_RangeTestConfig"}),Nn=d.makeMessageType("meshtastic.ModuleConfig.TelemetryConfig",()=>[{no:1,name:"device_update_interval",kind:"scalar",T:13},{no:2,name:"environment_update_interval",kind:"scalar",T:13},{no:3,name:"environment_measurement_enabled",kind:"scalar",T:8},{no:4,name:"environment_screen_enabled",kind:"scalar",T:8},{no:5,name:"environment_display_fahrenheit",kind:"scalar",T:8},{no:6,name:"air_quality_enabled",kind:"scalar",T:8},{no:7,name:"air_quality_interval",kind:"scalar",T:13},{no:8,name:"power_measurement_enabled",kind:"scalar",T:8},{no:9,name:"power_update_interval",kind:"scalar",T:13},{no:10,name:"power_screen_enabled",kind:"scalar",T:8}],{localName:"ModuleConfig_TelemetryConfig"}),Sn=d.makeMessageType("meshtastic.ModuleConfig.CannedMessageConfig",()=>[{no:1,name:"rotary1_enabled",kind:"scalar",T:8},{no:2,name:"inputbroker_pin_a",kind:"scalar",T:13},{no:3,name:"inputbroker_pin_b",kind:"scalar",T:13},{no:4,name:"inputbroker_pin_press",kind:"scalar",T:13},{no:5,name:"inputbroker_event_cw",kind:"enum",T:d.getEnumType(Ge)},{no:6,name:"inputbroker_event_ccw",kind:"enum",T:d.getEnumType(Ge)},{no:7,name:"inputbroker_event_press",kind:"enum",T:d.getEnumType(Ge)},{no:8,name:"updown1_enabled",kind:"scalar",T:8},{no:9,name:"enabled",kind:"scalar",T:8},{no:10,name:"allow_input_source",kind:"scalar",T:9},{no:11,name:"send_bell",kind:"scalar",T:8}],{localName:"ModuleConfig_CannedMessageConfig"}),Ge=d.makeEnum("meshtastic.ModuleConfig.CannedMessageConfig.InputEventChar",[{no:0,name:"NONE"},{no:17,name:"UP"},{no:18,name:"DOWN"},{no:19,name:"LEFT"},{no:20,name:"RIGHT"},{no:10,name:"SELECT"},{no:27,name:"BACK"},{no:24,name:"CANCEL"}]),Pn=d.makeMessageType("meshtastic.ModuleConfig.AmbientLightingConfig",()=>[{no:1,name:"led_state",kind:"scalar",T:8},{no:2,name:"current",kind:"scalar",T:13},{no:3,name:"red",kind:"scalar",T:13},{no:4,name:"green",kind:"scalar",T:13},{no:5,name:"blue",kind:"scalar",T:13}],{localName:"ModuleConfig_AmbientLightingConfig"}),An=d.makeMessageType("meshtastic.RemoteHardwarePin",()=>[{no:1,name:"gpio_pin",kind:"scalar",T:13},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:d.getEnumType(et)}]),E={};y(E,{XModem:()=>Rn,XModem_Control:()=>it});var Rn=d.makeMessageType("meshtastic.XModem",()=>[{no:1,name:"control",kind:"enum",T:d.getEnumType(it)},{no:2,name:"seq",kind:"scalar",T:13},{no:3,name:"crc16",kind:"scalar",T:13},{no:4,name:"buffer",kind:"scalar",T:12}]),it=d.makeEnum("meshtastic.XModem.Control",[{no:0,name:"NUL"},{no:1,name:"SOH"},{no:2,name:"STX"},{no:4,name:"EOT"},{no:6,name:"ACK"},{no:21,name:"NAK"},{no:24,name:"CAN"},{no:26,name:"CTRLZ"}]),He=d.makeEnum("meshtastic.HardwareModel",[{no:0,name:"UNSET"},{no:1,name:"TLORA_V2"},{no:2,name:"TLORA_V1"},{no:3,name:"TLORA_V2_1_1P6"},{no:4,name:"TBEAM"},{no:5,name:"HELTEC_V2_0"},{no:6,name:"TBEAM_V0P7"},{no:7,name:"T_ECHO"},{no:8,name:"TLORA_V1_1P3"},{no:9,name:"RAK4631"},{no:10,name:"HELTEC_V2_1"},{no:11,name:"HELTEC_V1"},{no:12,name:"LILYGO_TBEAM_S3_CORE"},{no:13,name:"RAK11200"},{no:14,name:"NANO_G1"},{no:15,name:"TLORA_V2_1_1P8"},{no:16,name:"TLORA_T3_S3"},{no:17,name:"NANO_G1_EXPLORER"},{no:18,name:"NANO_G2_ULTRA"},{no:19,name:"LORA_TYPE"},{no:25,name:"STATION_G1"},{no:26,name:"RAK11310"},{no:27,name:"SENSELORA_RP2040"},{no:28,name:"SENSELORA_S3"},{no:29,name:"CANARYONE"},{no:30,name:"RP2040_LORA"},{no:31,name:"STATION_G2"},{no:32,name:"LORA_RELAY_V1"},{no:33,name:"NRF52840DK"},{no:34,name:"PPR"},{no:35,name:"GENIEBLOCKS"},{no:36,name:"NRF52_UNKNOWN"},{no:37,name:"PORTDUINO"},{no:38,name:"ANDROID_SIM"},{no:39,name:"DIY_V1"},{no:40,name:"NRF52840_PCA10059"},{no:41,name:"DR_DEV"},{no:42,name:"M5STACK"},{no:43,name:"HELTEC_V3"},{no:44,name:"HELTEC_WSL_V3"},{no:45,name:"BETAFPV_2400_TX"},{no:46,name:"BETAFPV_900_NANO_TX"},{no:47,name:"RPI_PICO"},{no:48,name:"HELTEC_WIRELESS_TRACKER"},{no:49,name:"HELTEC_WIRELESS_PAPER"},{no:50,name:"T_DECK"},{no:51,name:"T_WATCH_S3"},{no:52,name:"PICOMPUTER_S3"},{no:53,name:"HELTEC_HT62"},{no:54,name:"EBYTE_ESP32_S3"},{no:55,name:"ESP32_S3_PICO"},{no:56,name:"CHATTER_2"},{no:57,name:"HELTEC_WIRELESS_PAPER_V1_0"},{no:58,name:"HELTEC_WIRELESS_TRACKER_V1_0"},{no:255,name:"PRIVATE_HW"}]),$i=d.makeEnum("meshtastic.Constants",[{no:0,name:"ZERO"},{no:237,name:"DATA_PAYLOAD_LEN"}]),Gi=d.makeEnum("meshtastic.CriticalErrorCode",[{no:0,name:"NONE"},{no:1,name:"TX_WATCHDOG"},{no:2,name:"SLEEP_ENTER_WAIT"},{no:3,name:"NO_RADIO"},{no:4,name:"UNSPECIFIED"},{no:5,name:"UBLOX_UNIT_FAILED"},{no:6,name:"NO_AXP192"},{no:7,name:"INVALID_RADIO_SETTING"},{no:8,name:"TRANSMIT_FAILED"},{no:9,name:"BROWNOUT"},{no:10,name:"SX1262_FAILURE"},{no:11,name:"RADIO_SPI_BUG"}]),In=d.makeMessageType("meshtastic.Position",()=>[{no:1,name:"latitude_i",kind:"scalar",T:15},{no:2,name:"longitude_i",kind:"scalar",T:15},{no:3,name:"altitude",kind:"scalar",T:5},{no:4,name:"time",kind:"scalar",T:7},{no:5,name:"location_source",kind:"enum",T:d.getEnumType(Dn)},{no:6,name:"altitude_source",kind:"enum",T:d.getEnumType(rt)},{no:7,name:"timestamp",kind:"scalar",T:7},{no:8,name:"timestamp_millis_adjust",kind:"scalar",T:5},{no:9,name:"altitude_hae",kind:"scalar",T:17},{no:10,name:"altitude_geoidal_separation",kind:"scalar",T:17},{no:11,name:"PDOP",kind:"scalar",T:13},{no:12,name:"HDOP",kind:"scalar",T:13},{no:13,name:"VDOP",kind:"scalar",T:13},{no:14,name:"gps_accuracy",kind:"scalar",T:13},{no:15,name:"ground_speed",kind:"scalar",T:13},{no:16,name:"ground_track",kind:"scalar",T:13},{no:17,name:"fix_quality",kind:"scalar",T:13},{no:18,name:"fix_type",kind:"scalar",T:13},{no:19,name:"sats_in_view",kind:"scalar",T:13},{no:20,name:"sensor_id",kind:"scalar",T:13},{no:21,name:"next_update",kind:"scalar",T:13},{no:22,name:"seq_number",kind:"scalar",T:13},{no:23,name:"precision_bits",kind:"scalar",T:13}]),Dn=d.makeEnum("meshtastic.Position.LocSource",[{no:0,name:"LOC_UNSET"},{no:1,name:"LOC_MANUAL"},{no:2,name:"LOC_INTERNAL"},{no:3,name:"LOC_EXTERNAL"}]),rt=d.makeEnum("meshtastic.Position.AltSource",[{no:0,name:"ALT_UNSET"},{no:1,name:"ALT_MANUAL"},{no:2,name:"ALT_INTERNAL"},{no:3,name:"ALT_EXTERNAL"},{no:4,name:"ALT_BAROMETRIC"}]),X=d.makeMessageType("meshtastic.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"long_name",kind:"scalar",T:9},{no:3,name:"short_name",kind:"scalar",T:9},{no:4,name:"macaddr",kind:"scalar",T:12},{no:5,name:"hw_model",kind:"enum",T:d.getEnumType(He)},{no:6,name:"is_licensed",kind:"scalar",T:8},{no:7,name:"role",kind:"enum",T:d.getEnumType(ae)}]),Mn=d.makeMessageType("meshtastic.RouteDiscovery",()=>[{no:1,name:"route",kind:"scalar",T:7,repeated:!0}]),Hi=d.makeMessageType("meshtastic.Routing",()=>[{no:1,name:"route_request",kind:"message",T:Mn,oneof:"variant"},{no:2,name:"route_reply",kind:"message",T:Mn,oneof:"variant"},{no:3,name:"error_reason",kind:"enum",T:d.getEnumType(st),oneof:"variant"}]),st=d.makeEnum("meshtastic.Routing.Error",[{no:0,name:"NONE"},{no:1,name:"NO_ROUTE"},{no:2,name:"GOT_NAK"},{no:3,name:"TIMEOUT"},{no:4,name:"NO_INTERFACE"},{no:5,name:"MAX_RETRANSMIT"},{no:6,name:"NO_CHANNEL"},{no:7,name:"TOO_LARGE"},{no:8,name:"NO_RESPONSE"},{no:9,name:"DUTY_CYCLE_LIMIT"},{no:32,name:"BAD_REQUEST"},{no:33,name:"NOT_AUTHORIZED"}]),ct=d.makeMessageType("meshtastic.Data",()=>[{no:1,name:"portnum",kind:"enum",T:d.getEnumType(hn)},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"want_response",kind:"scalar",T:8},{no:4,name:"dest",kind:"scalar",T:7},{no:5,name:"source",kind:"scalar",T:7},{no:6,name:"request_id",kind:"scalar",T:7},{no:7,name:"reply_id",kind:"scalar",T:7},{no:8,name:"emoji",kind:"scalar",T:7}]),qi=d.makeMessageType("meshtastic.Waypoint",()=>[{no:1,name:"id",kind:"scalar",T:13},{no:2,name:"latitude_i",kind:"scalar",T:15},{no:3,name:"longitude_i",kind:"scalar",T:15},{no:4,name:"expire",kind:"scalar",T:13},{no:5,name:"locked_to",kind:"scalar",T:13},{no:6,name:"name",kind:"scalar",T:9},{no:7,name:"description",kind:"scalar",T:9},{no:8,name:"icon",kind:"scalar",T:7}]),xn=d.makeMessageType("meshtastic.MqttClientProxyMessage",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"data",kind:"scalar",T:12,oneof:"payload_variant"},{no:3,name:"text",kind:"scalar",T:9,oneof:"payload_variant"},{no:4,name:"retained",kind:"scalar",T:8}]),V=d.makeMessageType("meshtastic.MeshPacket",()=>[{no:1,name:"from",kind:"scalar",T:7},{no:2,name:"to",kind:"scalar",T:7},{no:3,name:"channel",kind:"scalar",T:13},{no:4,name:"decoded",kind:"message",T:ct,oneof:"payload_variant"},{no:5,name:"encrypted",kind:"scalar",T:12,oneof:"payload_variant"},{no:6,name:"id",kind:"scalar",T:7},{no:7,name:"rx_time",kind:"scalar",T:7},{no:8,name:"rx_snr",kind:"scalar",T:2},{no:9,name:"hop_limit",kind:"scalar",T:13},{no:10,name:"want_ack",kind:"scalar",T:8},{no:11,name:"priority",kind:"enum",T:d.getEnumType(dt)},{no:12,name:"rx_rssi",kind:"scalar",T:5},{no:13,name:"delayed",kind:"enum",T:d.getEnumType(mt)},{no:14,name:"via_mqtt",kind:"scalar",T:8},{no:15,name:"hop_start",kind:"scalar",T:13}]),dt=d.makeEnum("meshtastic.MeshPacket.Priority",[{no:0,name:"UNSET"},{no:1,name:"MIN"},{no:10,name:"BACKGROUND"},{no:64,name:"DEFAULT"},{no:70,name:"RELIABLE"},{no:120,name:"ACK"},{no:127,name:"MAX"}]),mt=d.makeEnum("meshtastic.MeshPacket.Delayed",[{no:0,name:"NO_DELAY"},{no:1,name:"DELAYED_BROADCAST"},{no:2,name:"DELAYED_DIRECT"}]),lt=d.makeMessageType("meshtastic.NodeInfo",()=>[{no:1,name:"num",kind:"scalar",T:13},{no:2,name:"user",kind:"message",T:X},{no:3,name:"position",kind:"message",T:In},{no:4,name:"snr",kind:"scalar",T:2},{no:5,name:"last_heard",kind:"scalar",T:7},{no:6,name:"device_metrics",kind:"message",T:Ve},{no:7,name:"channel",kind:"scalar",T:13},{no:8,name:"via_mqtt",kind:"scalar",T:8},{no:9,name:"hops_away",kind:"scalar",T:13},{no:10,name:"is_favorite",kind:"scalar",T:8}]),On=d.makeMessageType("meshtastic.MyNodeInfo",()=>[{no:1,name:"my_node_num",kind:"scalar",T:13},{no:8,name:"reboot_count",kind:"scalar",T:13},{no:11,name:"min_app_version",kind:"scalar",T:13}]),ut=d.makeMessageType("meshtastic.LogRecord",()=>[{no:1,name:"message",kind:"scalar",T:9},{no:2,name:"time",kind:"scalar",T:7},{no:3,name:"source",kind:"scalar",T:9},{no:4,name:"level",kind:"enum",T:d.getEnumType(ft)}]),ft=d.makeEnum("meshtastic.LogRecord.Level",[{no:0,name:"UNSET"},{no:50,name:"CRITICAL"},{no:40,name:"ERROR"},{no:30,name:"WARNING"},{no:20,name:"INFO"},{no:10,name:"DEBUG"},{no:5,name:"TRACE"}]),ht=d.makeMessageType("meshtastic.QueueStatus",()=>[{no:1,name:"res",kind:"scalar",T:5},{no:2,name:"free",kind:"scalar",T:13},{no:3,name:"maxlen",kind:"scalar",T:13},{no:4,name:"mesh_packet_id",kind:"scalar",T:13}]),Wi=d.makeMessageType("meshtastic.FromRadio",()=>[{no:1,name:"id",kind:"scalar",T:13},{no:2,name:"packet",kind:"message",T:V,oneof:"payload_variant"},{no:3,name:"my_info",kind:"message",T:On,oneof:"payload_variant"},{no:4,name:"node_info",kind:"message",T:lt,oneof:"payload_variant"},{no:5,name:"config",kind:"message",T:Be,oneof:"payload_variant"},{no:6,name:"log_record",kind:"message",T:ut,oneof:"payload_variant"},{no:7,name:"config_complete_id",kind:"scalar",T:13,oneof:"payload_variant"},{no:8,name:"rebooted",kind:"scalar",T:8,oneof:"payload_variant"},{no:9,name:"moduleConfig",kind:"message",T:$e,oneof:"payload_variant"},{no:10,name:"channel",kind:"message",T:ne,oneof:"payload_variant"},{no:11,name:"queueStatus",kind:"message",T:ht,oneof:"payload_variant"},{no:12,name:"xmodemPacket",kind:"message",T:Rn,oneof:"payload_variant"},{no:13,name:"metadata",kind:"message",T:Ln,oneof:"payload_variant"},{no:14,name:"mqttClientProxyMessage",kind:"message",T:xn,oneof:"payload_variant"}]),Xi=d.makeMessageType("meshtastic.ToRadio",()=>[{no:1,name:"packet",kind:"message",T:V,oneof:"payload_variant"},{no:3,name:"want_config_id",kind:"scalar",T:13,oneof:"payload_variant"},{no:4,name:"disconnect",kind:"scalar",T:8,oneof:"payload_variant"},{no:5,name:"xmodemPacket",kind:"message",T:Rn,oneof:"payload_variant"},{no:6,name:"mqttClientProxyMessage",kind:"message",T:xn,oneof:"payload_variant"},{no:7,name:"heartbeat",kind:"message",T:gt,oneof:"payload_variant"}]),Ki=d.makeMessageType("meshtastic.Compressed",()=>[{no:1,name:"portnum",kind:"enum",T:d.getEnumType(hn)},{no:2,name:"data",kind:"scalar",T:12}]),Yi=d.makeMessageType("meshtastic.NeighborInfo",()=>[{no:1,name:"node_id",kind:"scalar",T:13},{no:2,name:"last_sent_by_id",kind:"scalar",T:13},{no:3,name:"node_broadcast_interval_secs",kind:"scalar",T:13},{no:4,name:"neighbors",kind:"message",T:pt,repeated:!0}]),pt=d.makeMessageType("meshtastic.Neighbor",()=>[{no:1,name:"node_id",kind:"scalar",T:13},{no:2,name:"snr",kind:"scalar",T:2},{no:3,name:"last_rx_time",kind:"scalar",T:7},{no:4,name:"node_broadcast_interval_secs",kind:"scalar",T:13}]),Ln=d.makeMessageType("meshtastic.DeviceMetadata",()=>[{no:1,name:"firmware_version",kind:"scalar",T:9},{no:2,name:"device_state_version",kind:"scalar",T:13},{no:3,name:"canShutdown",kind:"scalar",T:8},{no:4,name:"hasWifi",kind:"scalar",T:8},{no:5,name:"hasBluetooth",kind:"scalar",T:8},{no:6,name:"hasEthernet",kind:"scalar",T:8},{no:7,name:"role",kind:"enum",T:d.getEnumType(ae)},{no:8,name:"position_flags",kind:"scalar",T:13},{no:9,name:"hw_model",kind:"enum",T:d.getEnumType(He)},{no:10,name:"hasRemoteHardware",kind:"scalar",T:8}]),gt=d.makeMessageType("meshtastic.Heartbeat",[]),Fn=d.makeMessageType("meshtastic.NodeRemoteHardwarePin",()=>[{no:1,name:"node_num",kind:"scalar",T:13},{no:2,name:"pin",kind:"message",T:An}]),_t={};y(_t,{BluetoothConnectionStatus:()=>vt,DeviceConnectionStatus:()=>Tt,EthernetConnectionStatus:()=>yt,NetworkConnectionStatus:()=>Bn,SerialConnectionStatus:()=>bt,WifiConnectionStatus:()=>kt});var Tt=d.makeMessageType("meshtastic.DeviceConnectionStatus",()=>[{no:1,name:"wifi",kind:"message",T:kt,opt:!0},{no:2,name:"ethernet",kind:"message",T:yt,opt:!0},{no:3,name:"bluetooth",kind:"message",T:vt,opt:!0},{no:4,name:"serial",kind:"message",T:bt,opt:!0}]),kt=d.makeMessageType("meshtastic.WifiConnectionStatus",()=>[{no:1,name:"status",kind:"message",T:Bn},{no:2,name:"ssid",kind:"scalar",T:9},{no:3,name:"rssi",kind:"scalar",T:5}]),yt=d.makeMessageType("meshtastic.EthernetConnectionStatus",()=>[{no:1,name:"status",kind:"message",T:Bn}]),Bn=d.makeMessageType("meshtastic.NetworkConnectionStatus",()=>[{no:1,name:"ip_address",kind:"scalar",T:7},{no:2,name:"is_connected",kind:"scalar",T:8},{no:3,name:"is_mqtt_connected",kind:"scalar",T:8},{no:4,name:"is_syslog_connected",kind:"scalar",T:8}]),vt=d.makeMessageType("meshtastic.BluetoothConnectionStatus",()=>[{no:1,name:"pin",kind:"scalar",T:13},{no:2,name:"rssi",kind:"scalar",T:5},{no:3,name:"is_connected",kind:"scalar",T:8}]),bt=d.makeMessageType("meshtastic.SerialConnectionStatus",()=>[{no:1,name:"baud",kind:"scalar",T:13},{no:2,name:"is_connected",kind:"scalar",T:8}]),Ji=d.makeMessageType("meshtastic.AdminMessage",()=>[{no:1,name:"get_channel_request",kind:"scalar",T:13,oneof:"payload_variant"},{no:2,name:"get_channel_response",kind:"message",T:ne,oneof:"payload_variant"},{no:3,name:"get_owner_request",kind:"scalar",T:8,oneof:"payload_variant"},{no:4,name:"get_owner_response",kind:"message",T:X,oneof:"payload_variant"},{no:5,name:"get_config_request",kind:"enum",T:d.getEnumType(Ct),oneof:"payload_variant"},{no:6,name:"get_config_response",kind:"message",T:Be,oneof:"payload_variant"},{no:7,name:"get_module_config_request",kind:"enum",T:d.getEnumType(wt),oneof:"payload_variant"},{no:8,name:"get_module_config_response",kind:"message",T:$e,oneof:"payload_variant"},{no:10,name:"get_canned_message_module_messages_request",kind:"scalar",T:8,oneof:"payload_variant"},{no:11,name:"get_canned_message_module_messages_response",kind:"scalar",T:9,oneof:"payload_variant"},{no:12,name:"get_device_metadata_request",kind:"scalar",T:8,oneof:"payload_variant"},{no:13,name:"get_device_metadata_response",kind:"message",T:Ln,oneof:"payload_variant"},{no:14,name:"get_ringtone_request",kind:"scalar",T:8,oneof:"payload_variant"},{no:15,name:"get_ringtone_response",kind:"scalar",T:9,oneof:"payload_variant"},{no:16,name:"get_device_connection_status_request",kind:"scalar",T:8,oneof:"payload_variant"},{no:17,name:"get_device_connection_status_response",kind:"message",T:Tt,oneof:"payload_variant"},{no:18,name:"set_ham_mode",kind:"message",T:Et,oneof:"payload_variant"},{no:19,name:"get_node_remote_hardware_pins_request",kind:"scalar",T:8,oneof:"payload_variant"},{no:20,name:"get_node_remote_hardware_pins_response",kind:"message",T:Nt,oneof:"payload_variant"},{no:21,name:"enter_dfu_mode_request",kind:"scalar",T:8,oneof:"payload_variant"},{no:22,name:"delete_file_request",kind:"scalar",T:9,oneof:"payload_variant"},{no:32,name:"set_owner",kind:"message",T:X,oneof:"payload_variant"},{no:33,name:"set_channel",kind:"message",T:ne,oneof:"payload_variant"},{no:34,name:"set_config",kind:"message",T:Be,oneof:"payload_variant"},{no:35,name:"set_module_config",kind:"message",T:$e,oneof:"payload_variant"},{no:36,name:"set_canned_message_module_messages",kind:"scalar",T:9,oneof:"payload_variant"},{no:37,name:"set_ringtone_message",kind:"scalar",T:9,oneof:"payload_variant"},{no:38,name:"remove_by_nodenum",kind:"scalar",T:13,oneof:"payload_variant"},{no:39,name:"set_favorite_node",kind:"scalar",T:13,oneof:"payload_variant"},{no:40,name:"remove_favorite_node",kind:"scalar",T:13,oneof:"payload_variant"},{no:41,name:"set_fixed_position",kind:"message",T:In,oneof:"payload_variant"},{no:42,name:"remove_fixed_position",kind:"scalar",T:8,oneof:"payload_variant"},{no:64,name:"begin_edit_settings",kind:"scalar",T:8,oneof:"payload_variant"},{no:65,name:"commit_edit_settings",kind:"scalar",T:8,oneof:"payload_variant"},{no:95,name:"reboot_ota_seconds",kind:"scalar",T:5,oneof:"payload_variant"},{no:96,name:"exit_simulator",kind:"scalar",T:8,oneof:"payload_variant"},{no:97,name:"reboot_seconds",kind:"scalar",T:5,oneof:"payload_variant"},{no:98,name:"shutdown_seconds",kind:"scalar",T:5,oneof:"payload_variant"},{no:99,name:"factory_reset",kind:"scalar",T:5,oneof:"payload_variant"},{no:100,name:"nodedb_reset",kind:"scalar",T:5,oneof:"payload_variant"}]),Ct=d.makeEnum("meshtastic.AdminMessage.ConfigType",[{no:0,name:"DEVICE_CONFIG"},{no:1,name:"POSITION_CONFIG"},{no:2,name:"POWER_CONFIG"},{no:3,name:"NETWORK_CONFIG"},{no:4,name:"DISPLAY_CONFIG"},{no:5,name:"LORA_CONFIG"},{no:6,name:"BLUETOOTH_CONFIG"}]),wt=d.makeEnum("meshtastic.AdminMessage.ModuleConfigType",[{no:0,name:"MQTT_CONFIG"},{no:1,name:"SERIAL_CONFIG"},{no:2,name:"EXTNOTIF_CONFIG"},{no:3,name:"STOREFORWARD_CONFIG"},{no:4,name:"RANGETEST_CONFIG"},{no:5,name:"TELEMETRY_CONFIG"},{no:6,name:"CANNEDMSG_CONFIG"},{no:7,name:"AUDIO_CONFIG"},{no:8,name:"REMOTEHARDWARE_CONFIG"},{no:9,name:"NEIGHBORINFO_CONFIG"},{no:10,name:"AMBIENTLIGHTING_CONFIG"},{no:11,name:"DETECTIONSENSOR_CONFIG"},{no:12,name:"PAXCOUNTER_CONFIG"}]),Et=d.makeMessageType("meshtastic.HamParameters",()=>[{no:1,name:"call_sign",kind:"scalar",T:9},{no:2,name:"tx_power",kind:"scalar",T:5},{no:3,name:"frequency",kind:"scalar",T:2},{no:4,name:"short_name",kind:"scalar",T:9}]),Nt=d.makeMessageType("meshtastic.NodeRemoteHardwarePinsResponse",()=>[{no:1,name:"node_remote_hardware_pins",kind:"message",T:Fn,repeated:!0}]),St={};y(St,{ChannelSet:()=>zi});var zi=d.makeMessageType("meshtastic.ChannelSet",()=>[{no:1,name:"settings",kind:"message",T:on,repeated:!0},{no:2,name:"lora_config",kind:"message",T:Ue}]),Pt={};y(Pt,{CannedMessageModuleConfig:()=>Qi});var Qi=d.makeMessageType("meshtastic.CannedMessageModuleConfig",()=>[{no:1,name:"messages",kind:"scalar",T:9}]),At={};y(At,{DeviceProfile:()=>Zi});var Rt={};y(Rt,{LocalConfig:()=>Un,LocalModuleConfig:()=>Vn});var Un=d.makeMessageType("meshtastic.LocalConfig",()=>[{no:1,name:"device",kind:"message",T:rn},{no:2,name:"position",kind:"message",T:sn},{no:3,name:"power",kind:"message",T:cn},{no:4,name:"network",kind:"message",T:dn},{no:5,name:"display",kind:"message",T:mn},{no:6,name:"lora",kind:"message",T:Ue},{no:7,name:"bluetooth",kind:"message",T:fn},{no:8,name:"version",kind:"scalar",T:13}]),Vn=d.makeMessageType("meshtastic.LocalModuleConfig",()=>[{no:1,name:"mqtt",kind:"message",T:gn},{no:2,name:"serial",kind:"message",T:bn},{no:3,name:"external_notification",kind:"message",T:Cn},{no:4,name:"store_forward",kind:"message",T:wn},{no:5,name:"range_test",kind:"message",T:En},{no:6,name:"telemetry",kind:"message",T:Nn},{no:7,name:"canned_message",kind:"message",T:Sn},{no:9,name:"audio",kind:"message",T:yn},{no:10,name:"remote_hardware",kind:"message",T:_n},{no:11,name:"neighbor_info",kind:"message",T:Tn},{no:12,name:"ambient_lighting",kind:"message",T:Pn},{no:13,name:"detection_sensor",kind:"message",T:kn},{no:14,name:"paxcounter",kind:"message",T:vn},{no:8,name:"version",kind:"scalar",T:13}]),Zi=d.makeMessageType("meshtastic.DeviceProfile",()=>[{no:1,name:"long_name",kind:"scalar",T:9,opt:!0},{no:2,name:"short_name",kind:"scalar",T:9,opt:!0},{no:3,name:"channel_url",kind:"scalar",T:9,opt:!0},{no:4,name:"config",kind:"message",T:Un,opt:!0},{no:5,name:"module_config",kind:"message",T:Vn,opt:!0}]),It={};y(It,{ChannelFile:()=>er,DeviceState:()=>ji,NodeInfoLite:()=>Mt,OEMStore:()=>nr,PositionLite:()=>xt,ScreenFonts:()=>Dt});var Dt=d.makeEnum("meshtastic.ScreenFonts",[{no:0,name:"FONT_SMALL"},{no:1,name:"FONT_MEDIUM"},{no:2,name:"FONT_LARGE"}]),ji=d.makeMessageType("meshtastic.DeviceState",()=>[{no:2,name:"my_node",kind:"message",T:On},{no:3,name:"owner",kind:"message",T:X},{no:5,name:"receive_queue",kind:"message",T:V,repeated:!0},{no:8,name:"version",kind:"scalar",T:13},{no:7,name:"rx_text_message",kind:"message",T:V},{no:9,name:"no_save",kind:"scalar",T:8},{no:11,name:"did_gps_reset",kind:"scalar",T:8},{no:12,name:"rx_waypoint",kind:"message",T:V},{no:13,name:"node_remote_hardware_pins",kind:"message",T:Fn,repeated:!0},{no:14,name:"node_db_lite",kind:"message",T:Mt,repeated:!0}]),Mt=d.makeMessageType("meshtastic.NodeInfoLite",()=>[{no:1,name:"num",kind:"scalar",T:13},{no:2,name:"user",kind:"message",T:X},{no:3,name:"position",kind:"message",T:xt},{no:4,name:"snr",kind:"scalar",T:2},{no:5,name:"last_heard",kind:"scalar",T:7},{no:6,name:"device_metrics",kind:"message",T:Ve},{no:7,name:"channel",kind:"scalar",T:13},{no:8,name:"via_mqtt",kind:"scalar",T:8},{no:9,name:"hops_away",kind:"scalar",T:13},{no:10,name:"is_favorite",kind:"scalar",T:8}]),xt=d.makeMessageType("meshtastic.PositionLite",()=>[{no:1,name:"latitude_i",kind:"scalar",T:15},{no:2,name:"longitude_i",kind:"scalar",T:15},{no:3,name:"altitude",kind:"scalar",T:5},{no:4,name:"time",kind:"scalar",T:7},{no:5,name:"location_source",kind:"enum",T:d.getEnumType(Dn)}]),er=d.makeMessageType("meshtastic.ChannelFile",()=>[{no:1,name:"channels",kind:"message",T:ne,repeated:!0},{no:2,name:"version",kind:"scalar",T:13}]),nr=d.makeMessageType("meshtastic.OEMStore",()=>[{no:1,name:"oem_icon_width",kind:"scalar",T:13},{no:2,name:"oem_icon_height",kind:"scalar",T:13},{no:3,name:"oem_icon_bits",kind:"scalar",T:12},{no:4,name:"oem_font",kind:"enum",T:d.getEnumType(Dt)},{no:5,name:"oem_text",kind:"scalar",T:9},{no:6,name:"oem_aes_key",kind:"scalar",T:12},{no:7,name:"oem_local_config",kind:"message",T:Un},{no:8,name:"oem_local_module_config",kind:"message",T:Vn}]),Ot={};y(Ot,{MapReport:()=>tr,ServiceEnvelope:()=>ar});var ar=d.makeMessageType("meshtastic.ServiceEnvelope",()=>[{no:1,name:"packet",kind:"message",T:V},{no:2,name:"channel_id",kind:"scalar",T:9},{no:3,name:"gateway_id",kind:"scalar",T:9}]),tr=d.makeMessageType("meshtastic.MapReport",()=>[{no:1,name:"long_name",kind:"scalar",T:9},{no:2,name:"short_name",kind:"scalar",T:9},{no:3,name:"role",kind:"enum",T:d.getEnumType(ae)},{no:4,name:"hw_model",kind:"enum",T:d.getEnumType(He)},{no:5,name:"firmware_version",kind:"scalar",T:9},{no:6,name:"region",kind:"enum",T:d.getEnumType(ln)},{no:7,name:"modem_preset",kind:"enum",T:d.getEnumType(un)},{no:8,name:"has_default_channel",kind:"scalar",T:8},{no:9,name:"latitude_i",kind:"scalar",T:15},{no:10,name:"longitude_i",kind:"scalar",T:15},{no:11,name:"altitude",kind:"scalar",T:5},{no:12,name:"position_precision",kind:"scalar",T:13},{no:13,name:"num_online_local_nodes",kind:"scalar",T:13}]),$n={};y($n,{Paxcount:()=>or});var or=d.makeMessageType("meshtastic.Paxcount",()=>[{no:1,name:"wifi",kind:"scalar",T:13},{no:2,name:"ble",kind:"scalar",T:13},{no:3,name:"uptime",kind:"scalar",T:13}]),Gn={};y(Gn,{HardwareMessage:()=>ir,HardwareMessage_Type:()=>Lt});var ir=d.makeMessageType("meshtastic.HardwareMessage",()=>[{no:1,name:"type",kind:"enum",T:d.getEnumType(Lt)},{no:2,name:"gpio_mask",kind:"scalar",T:4},{no:3,name:"gpio_value",kind:"scalar",T:4}]),Lt=d.makeEnum("meshtastic.HardwareMessage.Type",[{no:0,name:"UNSET"},{no:1,name:"WRITE_GPIOS"},{no:2,name:"WATCH_GPIOS"},{no:3,name:"GPIOS_CHANGED"},{no:4,name:"READ_GPIOS"},{no:5,name:"READ_GPIOS_REPLY"}]),Ft={};y(Ft,{RTTTLConfig:()=>rr});var rr=d.makeMessageType("meshtastic.RTTTLConfig",()=>[{no:1,name:"ringtone",kind:"scalar",T:9}]),Bt={};y(Bt,{StoreAndForward:()=>sr,StoreAndForward_Heartbeat:()=>Gt,StoreAndForward_History:()=>$t,StoreAndForward_RequestResponse:()=>Ut,StoreAndForward_Statistics:()=>Vt});var sr=d.makeMessageType("meshtastic.StoreAndForward",()=>[{no:1,name:"rr",kind:"enum",T:d.getEnumType(Ut)},{no:2,name:"stats",kind:"message",T:Vt,oneof:"variant"},{no:3,name:"history",kind:"message",T:$t,oneof:"variant"},{no:4,name:"heartbeat",kind:"message",T:Gt,oneof:"variant"},{no:5,name:"text",kind:"scalar",T:12,oneof:"variant"}]),Ut=d.makeEnum("meshtastic.StoreAndForward.RequestResponse",[{no:0,name:"UNSET"},{no:1,name:"ROUTER_ERROR"},{no:2,name:"ROUTER_HEARTBEAT"},{no:3,name:"ROUTER_PING"},{no:4,name:"ROUTER_PONG"},{no:5,name:"ROUTER_BUSY"},{no:6,name:"ROUTER_HISTORY"},{no:7,name:"ROUTER_STATS"},{no:8,name:"ROUTER_TEXT_DIRECT"},{no:9,name:"ROUTER_TEXT_BROADCAST"},{no:64,name:"CLIENT_ERROR"},{no:65,name:"CLIENT_HISTORY"},{no:66,name:"CLIENT_STATS"},{no:67,name:"CLIENT_PING"},{no:68,name:"CLIENT_PONG"},{no:106,name:"CLIENT_ABORT"}]),Vt=d.makeMessageType("meshtastic.StoreAndForward.Statistics",()=>[{no:1,name:"messages_total",kind:"scalar",T:13},{no:2,name:"messages_saved",kind:"scalar",T:13},{no:3,name:"messages_max",kind:"scalar",T:13},{no:4,name:"up_time",kind:"scalar",T:13},{no:5,name:"requests",kind:"scalar",T:13},{no:6,name:"requests_history",kind:"scalar",T:13},{no:7,name:"heartbeat",kind:"scalar",T:8},{no:8,name:"return_max",kind:"scalar",T:13},{no:9,name:"return_window",kind:"scalar",T:13}],{localName:"StoreAndForward_Statistics"}),$t=d.makeMessageType("meshtastic.StoreAndForward.History",()=>[{no:1,name:"history_messages",kind:"scalar",T:13},{no:2,name:"window",kind:"scalar",T:13},{no:3,name:"last_request",kind:"scalar",T:13}],{localName:"StoreAndForward_History"}),Gt=d.makeMessageType("meshtastic.StoreAndForward.Heartbeat",()=>[{no:1,name:"period",kind:"scalar",T:13},{no:2,name:"secondary",kind:"scalar",T:13}],{localName:"StoreAndForward_Heartbeat"}),Ht={};y(Ht,{ChannelNumber:()=>Xt,DeviceStatusEnum:()=>qt,Emitter:()=>p,EmitterScope:()=>Wt});var qt=(n=>(n[n.DeviceRestarting=1]="DeviceRestarting",n[n.DeviceDisconnected=2]="DeviceDisconnected",n[n.DeviceConnecting=3]="DeviceConnecting",n[n.DeviceReconnecting=4]="DeviceReconnecting",n[n.DeviceConnected=5]="DeviceConnected",n[n.DeviceConfiguring=6]="DeviceConfiguring",n[n.DeviceConfigured=7]="DeviceConfigured",n))(qt||{}),Wt=(n=>(n[n.MeshDevice=1]="MeshDevice",n[n.SerialConnection=2]="SerialConnection",n[n.NodeSerialConnection=3]="NodeSerialConnection",n[n.BleConnection=4]="BleConnection",n[n.HttpConnection=5]="HttpConnection",n))(Wt||{}),p=(n=>(n[n.Constructor=0]="Constructor",n[n.SendText=1]="SendText",n[n.SendWaypoint=2]="SendWaypoint",n[n.SendPacket=3]="SendPacket",n[n.SendRaw=4]="SendRaw",n[n.SetConfig=5]="SetConfig",n[n.SetModuleConfig=6]="SetModuleConfig",n[n.ConfirmSetConfig=7]="ConfirmSetConfig",n[n.SetOwner=8]="SetOwner",n[n.SetChannel=9]="SetChannel",n[n.ConfirmSetChannel=10]="ConfirmSetChannel",n[n.ClearChannel=11]="ClearChannel",n[n.GetChannel=12]="GetChannel",n[n.GetAllChannels=13]="GetAllChannels",n[n.GetConfig=14]="GetConfig",n[n.GetModuleConfig=15]="GetModuleConfig",n[n.GetOwner=16]="GetOwner",n[n.Configure=17]="Configure",n[n.HandleFromRadio=18]="HandleFromRadio",n[n.HandleMeshPacket=19]="HandleMeshPacket",n[n.Connect=20]="Connect",n[n.Ping=21]="Ping",n[n.ReadFromRadio=22]="ReadFromRadio",n[n.WriteToRadio=23]="WriteToRadio",n[n.SetDebugMode=24]="SetDebugMode",n[n.GetMetadata=25]="GetMetadata",n[n.ResetNodes=26]="ResetNodes",n[n.Shutdown=27]="Shutdown",n[n.Reboot=28]="Reboot",n[n.RebootOta=29]="RebootOta",n[n.FactoryReset=30]="FactoryReset",n[n.EnterDfuMode=31]="EnterDfuMode",n))(p||{}),Xt=(n=>(n[n.Primary=0]="Primary",n[n.Channel1=1]="Channel1",n[n.Channel2=2]="Channel2",n[n.Channel3=3]="Channel3",n[n.Channel4=4]="Channel4",n[n.Channel5=5]="Channel5",n[n.Channel6=6]="Channel6",n[n.Admin=7]="Admin",n))(Xt||{}),Kt={};y(Kt,{EventSystem:()=>Yt,Queue:()=>Jt,Xmodem:()=>Qt,transformHandler:()=>zt,typedArrayToBuffer:()=>Hn});var Yt=class{constructor(){f(this,"onLogEvent",new _.SimpleEventDispatcher);f(this,"onFromRadio",new _.SimpleEventDispatcher);f(this,"onMeshPacket",new _.SimpleEventDispatcher);f(this,"onMyNodeInfo",new _.SimpleEventDispatcher);f(this,"onNodeInfoPacket",new _.SimpleEventDispatcher);f(this,"onChannelPacket",new _.SimpleEventDispatcher);f(this,"onConfigPacket",new _.SimpleEventDispatcher);f(this,"onModuleConfigPacket",new _.SimpleEventDispatcher);f(this,"onAtakPacket",new _.SimpleEventDispatcher);f(this,"onMessagePacket",new _.SimpleEventDispatcher);f(this,"onRemoteHardwarePacket",new _.SimpleEventDispatcher);f(this,"onPositionPacket",new _.SimpleEventDispatcher);f(this,"onUserPacket",new _.SimpleEventDispatcher);f(this,"onRoutingPacket",new _.SimpleEventDispatcher);f(this,"onDeviceMetadataPacket",new _.SimpleEventDispatcher);f(this,"onWaypointPacket",new _.SimpleEventDispatcher);f(this,"onAudioPacket",new _.SimpleEventDispatcher);f(this,"onDetectionSensorPacket",new _.SimpleEventDispatcher);f(this,"onPingPacket",new _.SimpleEventDispatcher);f(this,"onIpTunnelPacket",new _.SimpleEventDispatcher);f(this,"onPaxcounterPacket",new _.SimpleEventDispatcher);f(this,"onSerialPacket",new _.SimpleEventDispatcher);f(this,"onStoreForwardPacket",new _.SimpleEventDispatcher);f(this,"onRangeTestPacket",new _.SimpleEventDispatcher);f(this,"onTelemetryPacket",new _.SimpleEventDispatcher);f(this,"onZpsPacket",new _.SimpleEventDispatcher);f(this,"onSimulatorPacket",new _.SimpleEventDispatcher);f(this,"onTraceRoutePacket",new _.SimpleEventDispatcher);f(this,"onNeighborInfoPacket",new _.SimpleEventDispatcher);f(this,"onAtakPluginPacket",new _.SimpleEventDispatcher);f(this,"onMapReportPacket",new _.SimpleEventDispatcher);f(this,"onPrivatePacket",new _.SimpleEventDispatcher);f(this,"onAtakForwarderPacket",new _.SimpleEventDispatcher);f(this,"onDeviceStatus",new _.SimpleEventDispatcher);f(this,"onLogRecord",new _.SimpleEventDispatcher);f(this,"onMeshHeartbeat",new _.SimpleEventDispatcher);f(this,"onDeviceDebugLog",new _.SimpleEventDispatcher);f(this,"onPendingSettingsChange",new _.SimpleEventDispatcher);f(this,"onQueueStatus",new _.SimpleEventDispatcher)}},Hn=n=>n.buffer.slice(n.byteOffset,n.byteLength+n.byteOffset),Jt=class{constructor(){f(this,"queue",[]);f(this,"lock",!1);f(this,"ackNotifier",new _.SimpleEventDispatcher);f(this,"errorNotifier",new _.SimpleEventDispatcher);f(this,"timeout");this.timeout=6e4}getState(){return this.queue}clear(){this.queue=[]}push(n){const e={...n,sent:!1,added:new Date,promise:new Promise((a,o)=>{this.ackNotifier.subscribe(t=>{n.id===t&&(this.remove(n.id),a(t))}),this.errorNotifier.subscribe(t=>{n.id===t.id&&(this.remove(n.id),o(t))}),setTimeout(()=>{if(this.queue.findIndex(t=>t.id===n.id)!==-1){this.remove(n.id);const t=w.ToRadio.fromBinary(n.data);console.warn(`Packet ${n.id} of type ${t.payloadVariant.case} timed out`),o({id:n.id,error:w.Routing_Error.TIMEOUT})}},this.timeout)})};this.queue.push(e)}remove(n){if(this.lock){setTimeout(()=>this.remove(n),100);return}this.queue=this.queue.filter(e=>e.id!==n)}processAck(n){this.ackNotifier.dispatch(n)}processError(n){console.error(`Error received for packet ${n.id}: ${w.Routing_Error[n.error]}`),this.errorNotifier.dispatch(n)}async wait(n){const e=this.queue.find(a=>a.id===n);if(!e)throw new Error("Packet does not exist");return e.promise}async processQueue(n){if(!this.lock){for(this.lock=!0;this.queue.filter(e=>!e.sent).length>0;){const e=this.queue.filter(a=>!a.sent)[0];if(e){await new Promise(a=>setTimeout(a,200));try{await n(e.data),e.sent=!0}catch(a){console.error(`Error sending packet ${e.id}`,a)}}}this.lock=!1}}},zt=(n,e,a,o)=>{let t=new Uint8Array([]);return new TransformStream({transform(i,r){n=n.getSubLogger({name:"streamTransformer"}),e.subscribe(()=>{r.terminate()}),t=new Uint8Array([...t,...i]);let s=!1;for(;t.length!==0&&!s;){const c=t.findIndex(l=>l===148);if(t[c+1]===195){t.subarray(0,c).length&&(o?a.dispatch(t.subarray(0,c)):n.warn(2,20,`⚠️ Found unneccesary message padding, removing: ${t.subarray(0,c).toString()}`),t=t.subarray(c));const l=t[2],h=t[3];if(l!==void 0&&h!==void 0&&t.length>=4+(l<<8)+h){const T=t.subarray(4,4+(l<<8)+h),S=T.findIndex(A=>A===148);S!==-1&&T[S+1]===195?(n.warn(2,20,`⚠️ Malformed packet found, discarding: ${t.subarray(0,S-1).toString()}`,w.LogRecord_Level.WARNING),t=t.subarray(S)):(t=t.subarray(3+(l<<8)+h+1),r.enqueue(T))}else s=!0}else s=!0}}})},Qt=class{constructor(n){f(this,"sendRaw");f(this,"rxBuffer");f(this,"txBuffer");f(this,"textEncoder");f(this,"counter");this.sendRaw=n,this.rxBuffer=[],this.txBuffer=[],this.textEncoder=new TextEncoder,this.counter=0}async downloadFile(n){return await this.sendCommand(E.XModem_Control.STX,this.textEncoder.encode(n),0)}async uploadFile(n,e){for(let a=0;a<e.length;a+=128)this.txBuffer.push(e.slice(a,a+128));return await this.sendCommand(E.XModem_Control.SOH,this.textEncoder.encode(n),0)}async sendCommand(n,e,a,o){const t=new w.ToRadio({payloadVariant:{case:"xmodemPacket",value:{buffer:e,control:n,seq:a,crc16:o}}});return await this.sendRaw(t.toBinary())}async handlePacket(n){switch(await new Promise(e=>setTimeout(e,100)),n.control){case E.XModem_Control.NUL:break;case E.XModem_Control.SOH:return this.counter=n.seq,this.validateCrc16(n)?(this.rxBuffer[this.counter]=n.buffer,this.sendCommand(E.XModem_Control.ACK)):await this.sendCommand(E.XModem_Control.NAK,void 0,n.seq);case E.XModem_Control.STX:break;case E.XModem_Control.EOT:break;case E.XModem_Control.ACK:{if(this.counter++,this.txBuffer[this.counter-1])return this.sendCommand(E.XModem_Control.SOH,this.txBuffer[this.counter-1],this.counter,Ze(this.txBuffer[this.counter-1]??new Uint8Array));if(this.counter===this.txBuffer.length+1)return this.sendCommand(E.XModem_Control.EOT);this.clear();break}case E.XModem_Control.NAK:return this.sendCommand(E.XModem_Control.SOH,this.txBuffer[this.counter],this.counter,Ze(this.txBuffer[this.counter-1]??new Uint8Array));case E.XModem_Control.CAN:{this.clear();break}case E.XModem_Control.CTRLZ:break}return Promise.resolve(0)}validateCrc16(n){return Ze(n.buffer)===n.crc16}clear(){this.counter=0,this.rxBuffer=[],this.txBuffer=[]}},qe=class{constructor(n){f(this,"log");f(this,"deviceStatus");f(this,"isConfigured");f(this,"pendingSettingsChanges");f(this,"myNodeInfo");f(this,"configId");f(this,"queue");f(this,"events");f(this,"xModem");this.log=new bo({name:"iMeshDevice",prettyLogTemplate:"{{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	[{{name}}]	"}),this.deviceStatus=2,this.isConfigured=!1,this.pendingSettingsChanges=!1,this.myNodeInfo=new w.MyNodeInfo,this.configId=n??this.generateRandId(),this.queue=new Jt,this.events=new Yt,this.xModem=new Qt(this.sendRaw.bind(this)),this.events.onDeviceStatus.subscribe(e=>{this.deviceStatus=e,e===7?this.isConfigured=!0:e===6&&(this.isConfigured=!1)}),this.events.onMyNodeInfo.subscribe(e=>{this.myNodeInfo=e}),this.events.onPendingSettingsChange.subscribe(e=>{this.pendingSettingsChanges=e})}async sendText(n,e,a,o){this.log.debug(p[1],`📤 Sending message to ${e??"broadcast"} on channel ${(o==null?void 0:o.toString())??0}`);const t=new TextEncoder;return await this.sendPacket(t.encode(n),g.PortNum.TEXT_MESSAGE_APP,e??"broadcast",o,a,!1,!0)}sendWaypoint(n,e,a){return this.log.debug(p[2],`📤 Sending waypoint to ${e} on channel ${(a==null?void 0:a.toString())??0}`),n.id=this.generateRandId(),this.sendPacket(n.toBinary(),g.PortNum.WAYPOINT_APP,e,a,!0,!1)}async sendPacket(n,e,a,o=0,t=!0,i=!0,r=!1,s,c){this.log.trace(p[3],`📤 Sending ${g.PortNum[e]} to ${a}`);const m=new w.MeshPacket({payloadVariant:{case:"decoded",value:{payload:n,portnum:e,wantResponse:i,emoji:c,replyId:s,dest:0,requestId:0,source:0}},from:this.myNodeInfo.myNodeNum,to:a==="broadcast"?Ne:a==="self"?this.myNodeInfo.myNodeNum:a,id:this.generateRandId(),wantAck:t,channel:o}),l=new w.ToRadio({payloadVariant:{case:"packet",value:m}});return r&&(m.rxTime=Math.trunc(new Date().getTime()/1e3),this.handleMeshPacket(m)),await this.sendRaw(l.toBinary(),m.id)}async sendRaw(n,e=this.generateRandId()){if(n.length>512)throw new Error("Message longer than 512 bytes, it will not be sent!");return this.queue.push({id:e,data:n}),await this.queue.processQueue(async a=>{await this.writeToRadio(a)}),this.queue.wait(e)}async setConfig(n){this.log.debug(p[5],`⚙️ Setting config, Variant: ${n.payloadVariant.case??"Unknown"}`),this.pendingSettingsChanges||await this.beginEditSettings();const e=new C.AdminMessage({payloadVariant:{case:"setConfig",value:n}});return this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,"self")}async setModuleConfig(n){this.log.debug(p[6],"⚙️ Setting module config");const e=new C.AdminMessage({payloadVariant:{case:"setModuleConfig",value:n}});return await this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,"self")}async setOwner(n){this.log.debug(p[8],"👤 Setting owner");const e=new C.AdminMessage({payloadVariant:{case:"setOwner",value:n}});return await this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,"self")}async setChannel(n){this.log.debug(p[9],`📻 Setting Channel: ${n.index}`);const e=new C.AdminMessage({payloadVariant:{case:"setChannel",value:n}});return await this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,"self")}async setPosition(n){return await this.sendPacket(n.toBinary(),g.PortNum.POSITION_APP,"self")}async getChannel(n){this.log.debug(p[12],`📻 Requesting Channel: ${n}`);const e=new C.AdminMessage({payloadVariant:{case:"getChannelRequest",value:n+1}});return await this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,"self")}async getConfig(n){this.log.debug(p[14],"⚙️ Requesting config");const e=new C.AdminMessage({payloadVariant:{case:"getConfigRequest",value:n}});return await this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,"self")}async getModuleConfig(n){this.log.debug(p[15],"⚙️ Requesting module config");const e=new C.AdminMessage({payloadVariant:{case:"getModuleConfigRequest",value:n}});return await this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,"self")}async getOwner(){this.log.debug(p[16],"👤 Requesting owner");const n=new C.AdminMessage({payloadVariant:{case:"getOwnerRequest",value:!0}});return await this.sendPacket(n.toBinary(),g.PortNum.ADMIN_APP,"self")}async getMetadata(n){this.log.debug(p[25],`🏷️ Requesting metadata from ${n}`);const e=new C.AdminMessage({payloadVariant:{case:"getDeviceMetadataRequest",value:!0}});return await this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,n,7)}async clearChannel(n){this.log.debug(p[11],`📻 Clearing Channel ${n}`);const e=new Fe.Channel({index:n,role:Fe.Channel_Role.DISABLED}),a=new C.AdminMessage({payloadVariant:{case:"setChannel",value:e}});return await this.sendPacket(a.toBinary(),g.PortNum.ADMIN_APP,"self")}async beginEditSettings(){this.events.onPendingSettingsChange.dispatch(!0);const n=new C.AdminMessage({payloadVariant:{case:"beginEditSettings",value:!0}});return await this.sendPacket(n.toBinary(),g.PortNum.ADMIN_APP,"self")}async commitEditSettings(){this.events.onPendingSettingsChange.dispatch(!1);const n=new C.AdminMessage({payloadVariant:{case:"commitEditSettings",value:!0}});return await this.sendPacket(n.toBinary(),g.PortNum.ADMIN_APP,"self")}async resetNodes(){this.log.debug(p[26],"📻 Resetting NodeDB");const n=new C.AdminMessage({payloadVariant:{case:"nodedbReset",value:1}});return await this.sendPacket(n.toBinary(),g.PortNum.ADMIN_APP,"self")}async shutdown(n){this.log.debug(p[27],`🔌 Shutting down ${n>2?"now":`in ${n} seconds`}`);const e=new C.AdminMessage({payloadVariant:{case:"shutdownSeconds",value:n}});return await this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,"self")}async reboot(n){this.log.debug(p[28],`🔌 Rebooting node ${n>0?"now":`in ${n} seconds`}`);const e=new C.AdminMessage({payloadVariant:{case:"rebootSeconds",value:n}});return await this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,"self")}async rebootOta(n){this.log.debug(p[29],`🔌 Rebooting into OTA mode ${n>0?"now":`in ${n} seconds`}`);const e=new C.AdminMessage({payloadVariant:{case:"rebootOtaSeconds",value:n}});return await this.sendPacket(e.toBinary(),g.PortNum.ADMIN_APP,"self")}async factoryReset(){this.log.debug(p[30],"♻️ Factory resetting node");const n=new C.AdminMessage({payloadVariant:{case:"factoryReset",value:1}});return await this.sendPacket(n.toBinary(),g.PortNum.ADMIN_APP,"self")}configure(){this.log.debug(p[17],"⚙️ Requesting device configuration"),this.updateDeviceStatus(6);const n=new w.ToRadio({payloadVariant:{case:"wantConfigId",value:this.configId}});return this.sendRaw(n.toBinary())}async traceRoute(n){const e=new w.RouteDiscovery({route:[]});return await this.sendPacket(e.toBinary(),g.PortNum.TRACEROUTE_APP,n)}async requestPosition(n){return await this.sendPacket(new Uint8Array,g.PortNum.POSITION_APP,n)}updateDeviceStatus(n){n!==this.deviceStatus&&this.events.onDeviceStatus.dispatch(n)}generateRandId(){const n=crypto.getRandomValues(new Uint32Array(1));if(!n[0])throw new Error("Cannot generate CSPRN");return Math.floor(n[0]*2**-32*1e9)}handleFromRadio(n){const e=w.FromRadio.fromBinary(n);switch(this.events.onFromRadio.dispatch(e),e.payloadVariant.case){case"packet":{this.handleMeshPacket(e.payloadVariant.value);break}case"myInfo":{this.events.onMyNodeInfo.dispatch(e.payloadVariant.value),this.log.info(p[18],"📱 Received Node info for this device");break}case"nodeInfo":{this.log.info(p[18],`📱 Received Node Info packet for node: ${e.payloadVariant.value.num}`),this.events.onNodeInfoPacket.dispatch(e.payloadVariant.value),e.payloadVariant.value.position&&this.events.onPositionPacket.dispatch({id:e.id,rxTime:new Date,from:e.payloadVariant.value.num,to:e.payloadVariant.value.num,type:"direct",channel:0,data:e.payloadVariant.value.position}),e.payloadVariant.value.user&&this.events.onUserPacket.dispatch({id:e.id,rxTime:new Date,from:e.payloadVariant.value.num,to:e.payloadVariant.value.num,type:"direct",channel:0,data:e.payloadVariant.value.user});break}case"config":{e.payloadVariant.value.payloadVariant.case?this.log.trace(p[18],`💾 Received Config packet of variant: ${e.payloadVariant.value.payloadVariant.case}`):this.log.warn(p[18],"⚠️ Received Config packet of variant: UNK"),this.events.onConfigPacket.dispatch(e.payloadVariant.value);break}case"logRecord":{this.log.trace(p[18],"Received onLogRecord"),this.events.onLogRecord.dispatch(e.payloadVariant.value);break}case"configCompleteId":{e.payloadVariant.value!==this.configId&&this.log.error(p[18],`❌ Invalid config id reveived from device, exptected ${this.configId} but received ${e.payloadVariant.value}`),this.log.info(p[18],`⚙️ Valid config id reveived from device: ${this.configId}`),this.updateDeviceStatus(7);break}case"rebooted":{this.configure().catch(()=>{});break}case"moduleConfig":{e.payloadVariant.value.payloadVariant.case?this.log.trace(p[18],`💾 Received Module Config packet of variant: ${e.payloadVariant.value.payloadVariant.case}`):this.log.warn(p[18],"⚠️ Received Module Config packet of variant: UNK"),this.events.onModuleConfigPacket.dispatch(e.payloadVariant.value);break}case"channel":{this.log.trace(p[18],`🔐 Received Channel: ${e.payloadVariant.value.index}`),this.events.onChannelPacket.dispatch(e.payloadVariant.value);break}case"queueStatus":{this.log.trace(p[18],`🚧 Received Queue Status: ${e.payloadVariant.value}`),this.events.onQueueStatus.dispatch(e.payloadVariant.value);break}case"xmodemPacket":{this.xModem.handlePacket(e.payloadVariant.value);break}case"metadata":{Number.parseFloat(e.payloadVariant.value.firmwareVersion)<Se&&this.log.fatal(p[18],`Device firmware outdated. Min supported: ${Se} got : ${e.payloadVariant.value.firmwareVersion}`),this.log.debug(p[25],"🏷️ Recieved metadata packet"),this.events.onDeviceMetadataPacket.dispatch({id:e.id,rxTime:new Date,from:0,to:0,type:"direct",channel:0,data:e.payloadVariant.value});break}case"mqttClientProxyMessage":break;default:this.log.warn(p[18],`⚠️ Unhandled payload variant: ${e.payloadVariant.case}`)}}complete(){this.queue.clear()}handleMeshPacket(n){switch(this.events.onMeshPacket.dispatch(n),n.from!==this.myNodeInfo.myNodeNum&&this.events.onMeshHeartbeat.dispatch(new Date),n.payloadVariant.case){case"decoded":{this.handleDecodedPacket(n.payloadVariant.value,n);break}case"encrypted":{this.log.debug(p[19],"🔐 Device received encrypted data packet, ignoring.");break}default:throw new Error(`Unhandled case ${n.payloadVariant.case}`)}}handleDecodedPacket(n,e){let a,o;const t={id:e.id,rxTime:new Date(e.rxTime*1e3),type:e.to===Ne?"broadcast":"direct",from:e.from,to:e.to,channel:e.channel};switch(this.log.trace(p[19],`📦 Received ${g.PortNum[n.portnum]} packet`),n.portnum){case g.PortNum.TEXT_MESSAGE_APP:{this.events.onMessagePacket.dispatch({...t,data:new TextDecoder().decode(n.payload)});break}case g.PortNum.REMOTE_HARDWARE_APP:{this.events.onRemoteHardwarePacket.dispatch({...t,data:Gn.HardwareMessage.fromBinary(n.payload)});break}case g.PortNum.POSITION_APP:{this.events.onPositionPacket.dispatch({...t,data:w.Position.fromBinary(n.payload)});break}case g.PortNum.NODEINFO_APP:{this.events.onUserPacket.dispatch({...t,data:w.User.fromBinary(n.payload)});break}case g.PortNum.ROUTING_APP:{switch(o=w.Routing.fromBinary(n.payload),this.events.onRoutingPacket.dispatch({...t,data:o}),o.variant.case){case"errorReason":{o.variant.value===w.Routing_Error.NONE?this.queue.processAck(n.requestId):this.queue.processError({id:n.requestId,error:o.variant.value});break}case"routeReply":break;case"routeRequest":break;default:throw new Error(`Unhandled case ${o.variant.case}`)}break}case g.PortNum.ADMIN_APP:{switch(a=C.AdminMessage.fromBinary(n.payload),a.payloadVariant.case){case"getChannelResponse":{this.events.onChannelPacket.dispatch(a.payloadVariant.value);break}case"getOwnerResponse":{this.events.onUserPacket.dispatch({...t,data:a.payloadVariant.value});break}case"getConfigResponse":{this.events.onConfigPacket.dispatch(a.payloadVariant.value);break}case"getModuleConfigResponse":{this.events.onModuleConfigPacket.dispatch(a.payloadVariant.value);break}case"getDeviceMetadataResponse":{this.log.debug(p[25],`🏷️ Recieved metadata packet from ${n.source}`),this.events.onDeviceMetadataPacket.dispatch({...t,data:a.payloadVariant.value});break}default:this.log.error(p[19],`⚠️ Received unhandled AdminMessage, type ${a.payloadVariant.case??"undefined"}`,n.payload)}break}case g.PortNum.WAYPOINT_APP:{this.events.onWaypointPacket.dispatch({...t,data:w.Waypoint.fromBinary(n.payload)});break}case g.PortNum.AUDIO_APP:{this.events.onAudioPacket.dispatch({...t,data:n.payload});break}case g.PortNum.DETECTION_SENSOR_APP:{this.events.onDetectionSensorPacket.dispatch({...t,data:n.payload});break}case g.PortNum.REPLY_APP:{this.events.onPingPacket.dispatch({...t,data:n.payload});break}case g.PortNum.IP_TUNNEL_APP:{this.events.onIpTunnelPacket.dispatch({...t,data:n.payload});break}case g.PortNum.PAXCOUNTER_APP:{this.events.onPaxcounterPacket.dispatch({...t,data:$n.Paxcount.fromBinary(n.payload)});break}case g.PortNum.SERIAL_APP:{this.events.onSerialPacket.dispatch({...t,data:n.payload});break}case g.PortNum.STORE_FORWARD_APP:{this.events.onStoreForwardPacket.dispatch({...t,data:n.payload});break}case g.PortNum.RANGE_TEST_APP:{this.events.onRangeTestPacket.dispatch({...t,data:n.payload});break}case g.PortNum.TELEMETRY_APP:{this.events.onTelemetryPacket.dispatch({...t,data:pn.Telemetry.fromBinary(n.payload)});break}case g.PortNum.ZPS_APP:{this.events.onZpsPacket.dispatch({...t,data:n.payload});break}case g.PortNum.SIMULATOR_APP:{this.events.onSimulatorPacket.dispatch({...t,data:n.payload});break}case g.PortNum.TRACEROUTE_APP:{this.events.onTraceRoutePacket.dispatch({...t,data:w.RouteDiscovery.fromBinary(n.payload)});break}case g.PortNum.NEIGHBORINFO_APP:{this.events.onNeighborInfoPacket.dispatch({...t,data:w.NeighborInfo.fromBinary(n.payload)});break}case g.PortNum.ATAK_PLUGIN:{this.events.onAtakPluginPacket.dispatch({...t,data:n.payload});break}case g.PortNum.MAP_REPORT_APP:{this.events.onMapReportPacket.dispatch({...t,data:n.payload});break}case g.PortNum.PRIVATE_APP:{this.events.onPrivatePacket.dispatch({...t,data:n.payload});break}case g.PortNum.ATAK_FORWARDER:{this.events.onAtakForwarderPacket.dispatch({...t,data:n.payload});break}default:throw new Error(`Unhandled case ${n.portnum}`)}}},Zt=class extends qe{constructor(e){super(e);f(this,"connType");f(this,"portId");f(this,"device");f(this,"gattServer");f(this,"service");f(this,"toRadioCharacteristic");f(this,"fromRadioCharacteristic");f(this,"fromNumCharacteristic");f(this,"timerUpdateFromRadio",null);this.log=this.log.getSubLogger({name:"HttpConnection"}),this.connType="ble",this.portId="",this.device=void 0,this.service=void 0,this.gattServer=void 0,this.toRadioCharacteristic=void 0,this.fromRadioCharacteristic=void 0,this.fromNumCharacteristic=void 0,this.log.debug(p[0],"🔷 BleConnection instantiated")}supported(){return navigator.bluetooth.getAvailability()}getDevices(){return navigator.bluetooth.getDevices()}getDevice(e){return navigator.bluetooth.requestDevice(e??{filters:[{services:[Ee]}]})}async connect({device:e,deviceFilter:a}){var o,t,i,r;this.updateDeviceStatus(3),this.device=e??await this.getDevice(a),this.portId=this.device.id,this.device.addEventListener("gattserverdisconnected",()=>{this.log.info(p[20],"Device disconnected"),this.updateDeviceStatus(2),this.complete()}),await((o=this.device.gatt)==null?void 0:o.connect().then(s=>{this.log.info(p[20],`✅ Got GATT Server for device: ${s.device.id}`),this.gattServer=s}).catch(s=>{this.log.error(p[20],`❌ Failed to connect: ${s.message}`)})),await((t=this.gattServer)==null?void 0:t.getPrimaryService(Ee).then(s=>{this.log.info(p[20],`✅ Got GATT Service for device: ${s.device.id}`),this.service=s}).catch(s=>{this.log.error(p[20],`❌ Failed to get primary service: q${s.message}`)})),[be,Ce,we].map(async s=>{var c;await((c=this.service)==null?void 0:c.getCharacteristic(s).then(m=>{switch(this.log.info(p[20],`✅ Got Characteristic ${m.uuid} for device: ${m.uuid}`),s){case be:{this.toRadioCharacteristic=m;break}case Ce:{this.fromRadioCharacteristic=m;break}case we:{this.fromNumCharacteristic=m;break}}}).catch(m=>{this.log.error(p[20],`❌ Failed to get toRadio characteristic: q${m.message}`)}))}),await((i=this.fromNumCharacteristic)==null?void 0:i.startNotifications()),(r=this.fromNumCharacteristic)==null||r.addEventListener("characteristicvaluechanged",()=>{this.readFromRadio()}),this.updateDeviceStatus(5),this.configure().catch(()=>{}),this.timerUpdateFromRadio=setInterval(()=>this.readFromRadio(),1e3)}disconnect(){var e,a;(a=(e=this.device)==null?void 0:e.gatt)==null||a.disconnect(),this.updateDeviceStatus(2),this.complete(),this.timerUpdateFromRadio&&clearInterval(this.timerUpdateFromRadio),this.timerUpdateFromRadio=null}async ping(){return await Promise.resolve(!0)}async readFromRadio(){let e=new ArrayBuffer(1);for(;e.byteLength>0&&this.fromRadioCharacteristic;)await this.fromRadioCharacteristic.readValue().then(a=>{e=a.buffer,a.byteLength>0&&this.handleFromRadio(new Uint8Array(e)),this.updateDeviceStatus(5)}).catch(a=>{e=new ArrayBuffer(0),this.log.error(p[22],`❌ ${a.message}`)})}async writeToRadio(e){var a;await((a=this.toRadioCharacteristic)==null?void 0:a.writeValue(Hn(e))),await this.readFromRadio()}},jt=class extends qe{constructor(e){super(e);f(this,"connType");f(this,"portId");f(this,"receiveBatchRequests");f(this,"readLoop");f(this,"pendingRequest");f(this,"abortController");this.log=this.log.getSubLogger({name:"HttpConnection"}),this.connType="http",this.portId="",this.receiveBatchRequests=!1,this.readLoop=null,this.pendingRequest=!1,this.abortController=new AbortController,this.log.debug(p[0],"🔷 HttpConnection instantiated")}async connect({address:e,fetchInterval:a=3e3,receiveBatchRequests:o=!1,tls:t=!1}){this.updateDeviceStatus(3),this.receiveBatchRequests=o,this.portId=`${t?"https://":"http://"}${e}`,this.deviceStatus===3&&await this.ping()?(this.log.debug(p[20],"Ping succeeded, starting configuration and request timer."),this.configure().catch(()=>{}),this.readLoop=setInterval(()=>{this.readFromRadio().catch(i=>{this.log.error(p[20],`❌ ${i.message}`)})},a)):this.deviceStatus!==2&&setTimeout(()=>{this.connect({address:e,fetchInterval:a,receiveBatchRequests:o,tls:t})},1e4)}disconnect(){this.abortController.abort(),this.updateDeviceStatus(2),this.readLoop&&(clearInterval(this.readLoop),this.complete())}async ping(){this.log.debug(p[21],"Attempting device ping."),this.abortController;let e=!1;return e=!0,this.updateDeviceStatus(5),e}async readFromRadio(){if(this.pendingRequest)return;let e=new ArrayBuffer(1);const{signal:a}=this.abortController;for(;e.byteLength>0;)this.pendingRequest=!0,await fetch(`${this.portId}/api/v1/fromradio?all=${this.receiveBatchRequests?"true":"false"}`,{signal:a,method:"GET",headers:{Accept:"application/x-protobuf"}}).then(async o=>{this.pendingRequest=!1,this.updateDeviceStatus(5),e=await o.arrayBuffer(),e.byteLength>0&&this.handleFromRadio(new Uint8Array(e))}).catch(o=>{this.pendingRequest=!1,this.log.error(p[22],`❌ ${o.message}`),this.updateDeviceStatus(4)})}async writeToRadio(e){const{signal:a}=this.abortController;await fetch(`${this.portId}/api/v1/toradio`,{signal:a,method:"PUT",headers:{"Content-Type":"application/x-protobuf"},body:Hn(e)}).then(async()=>{this.updateDeviceStatus(5),await this.readFromRadio().catch(o=>{this.log.error(p[23],`❌ ${o.message}`)})}).catch(o=>{this.log.error(p[23],`❌ ${o.message}`),this.updateDeviceStatus(4)})}},eo=class extends qe{constructor(e){super(e);f(this,"connType");f(this,"portId");f(this,"port");f(this,"readerHack");f(this,"transformer");f(this,"preventLock");f(this,"pipePromise");f(this,"onReleaseEvent");this.log=this.log.getSubLogger({name:"SerialConnection"}),this.connType="serial",this.portId="",this.port=void 0,this.transformer=void 0,this.onReleaseEvent=new _.SimpleEventDispatcher,this.preventLock=!1,this.log.debug(p[0],"🔷 SerialConnection instantiated")}async readFromRadio(e){var a;for(this.onReleaseEvent.subscribe(async()=>{var o,t;this.preventLock=!0,await e.cancel(),await((o=this.pipePromise)==null?void 0:o.catch(()=>{})),e.releaseLock(),await((t=this.port)==null?void 0:t.close())});(a=this.port)!=null&&a.readable&&!this.preventLock;)await e.read().then(({value:o})=>{o&&this.handleFromRadio(o)}).catch(()=>{this.log.debug(p[22],"Releasing reader")})}async getPorts(){return await navigator.serial.getPorts()}async getPort(e){return await navigator.serial.requestPort(e)}getCurrentPort(){return this.port}async connect({port:e,baudRate:a=115200,concurrentLogOutput:o=!1}){this.updateDeviceStatus(3),this.port=e??await this.getPort(),this.port.addEventListener("disconnect",()=>{this.log.info(p[20],"Device disconnected"),this.updateDeviceStatus(2),this.complete()}),this.preventLock=!1,await this.port.open({baudRate:a}).then(()=>{var t;if((t=this.port)!=null&&t.readable&&this.port.writable){this.transformer=zt(this.log,this.onReleaseEvent,this.events.onDeviceDebugLog,o),this.pipePromise=this.port.readable.pipeTo(this.transformer.writable);const i=this.readerHack=this.transformer.readable.getReader();this.readFromRadio(i),this.updateDeviceStatus(5),this.configure().catch(()=>{})}else console.log("not readable or writable")}).catch(t=>{this.log.error(p[20],`❌ ${t.message}`)})}async reconnect(){await this.connect({port:this.port,concurrentLogOutput:!1})}async disconnect(){var e,a,o,t,i;return this.preventLock=!0,await((e=this.readerHack)==null?void 0:e.cancel()),await((a=this.pipePromise)==null?void 0:a.catch(()=>{})),(o=this.readerHack)==null||o.releaseLock(),(t=this.port)!=null&&t.readable&&await((i=this.port)==null?void 0:i.close()),this.updateDeviceStatus(2),this.complete(),this.port}async ping(){return await Promise.resolve(!0)}async writeToRadio(e){var o,t,i,r;for(;(t=(o=this.port)==null?void 0:o.writable)!=null&&t.locked;)await new Promise(s=>setTimeout(s,100));const a=(r=(i=this.port)==null?void 0:i.writable)==null?void 0:r.getWriter();await(a==null?void 0:a.write(new Uint8Array([148,195,0,e.length,...e]))),a==null||a.releaseLock()}},cr=class{constructor(){f(this,"deviceInterfaces");this.deviceInterfaces=[]}createBleConnection(n){const e=new Zt(n);return this.deviceInterfaces.push(e),e}createHttpConnection(n){const e=new jt(n);return this.deviceInterfaces.push(e),e}createSerialConnection(n){const e=new eo(n);return this.deviceInterfaces.push(e),e}addConnection(n){this.deviceInterfaces.push(n)}removeConnection(n){const e=this.deviceInterfaces.indexOf(n);e!==-1&&this.deviceInterfaces.splice(e,1)}};k.BleConnection=Zt,k.Client=cr,k.Constants=Yo,k.FromNumUuid=we,k.FromRadioUuid=Ce,k.HttpConnection=jt,k.MeshDevice=qe,k.Protobuf=ia,k.SerialConnection=eo,k.ServiceUuid=Ee,k.ToRadioUuid=be,k.Types=Ht,k.Utils=Kt,k.broadcastNum=Ne,k.minFwVer=Se,Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});
